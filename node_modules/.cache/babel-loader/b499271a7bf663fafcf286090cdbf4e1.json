{"ast":null,"code":"import _objectWithoutProperties from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";var _excluded=[\"content\"],_excluded2=[\"content\"];var CHARTS_KEY='tradingviewCharts';var STUDIES_KEY='tradingviewStudies';// See https://github.com/tradingview/charting_library/wiki/Widget-Constructor#save_load_adapter\nexport function getAllCharts(){// @ts-ignore\nvar charts=JSON.parse(localStorage.getItem(CHARTS_KEY))||[];return new Promise(function(resolve){return resolve(charts);});}export function removeChart(chartId){// @ts-ignore\nvar charts=JSON.parse(localStorage.getItem(CHARTS_KEY))||[];charts=charts.filter(function(chart){return chart.id!==chartId;});localStorage.setItem(CHARTS_KEY,JSON.stringify(charts));localStorage.removeItem(CHARTS_KEY+'.'+chartId);return new Promise(function(resolve){return resolve();});}export function saveChart(chartData){var content=chartData.content,info=_objectWithoutProperties(chartData,_excluded);if(!info.id){info.id='chart'+Math.floor(Math.random()*1e8);}// @ts-ignore\ninfo.timestamp=new Date()-0;content=JSON.parse(content);content['content']=JSON.parse(content['content']);// Remove \"study_Overlay\" i.e the indexes\ntry{for(var i=0;i<content['content']['charts'][0]['panes'][0]['sources'].length;i++){if(content['content']['charts'][0]['panes'][0]['sources'][i]['type']==='study_Overlay'){content['content']['charts'][0]['panes'][0]['sources'].splice(i,1);}}}catch(err){console.log(err);}content['content']=JSON.stringify(content['content']);content=JSON.stringify(content);// @ts-ignore\nvar charts=JSON.parse(localStorage.getItem(CHARTS_KEY))||[];charts=charts.filter(function(chart){return chart.id!==info.id;});charts.push(info);localStorage.setItem(CHARTS_KEY,JSON.stringify(charts));localStorage.setItem(CHARTS_KEY+'.'+info.id,content);return new Promise(function(resolve){return resolve(info.id);});}export function getChartContent(chartId){var content=localStorage.getItem(CHARTS_KEY+'.'+chartId);return new Promise(function(resolve){return resolve(content);});}export function getAllStudyTemplates(){// @ts-ignore\nvar studies=JSON.parse(localStorage.getItem(STUDIES_KEY))||[];return new Promise(function(resolve){return resolve(studies);});}export function removeStudyTemplate(_ref){var name=_ref.name;// @ts-ignore\nvar studies=JSON.parse(localStorage.getItem(STUDIES_KEY))||[];studies=studies.filter(function(study){return study.name!==name;});localStorage.setItem(STUDIES_KEY,JSON.stringify(studies));localStorage.removeItem(STUDIES_KEY+'.'+name);return new Promise(function(resolve){return resolve();});}export function saveStudyTemplate(_ref2){var content=_ref2.content,info=_objectWithoutProperties(_ref2,_excluded2);// @ts-ignore\nvar studies=JSON.parse(localStorage.getItem(STUDIES_KEY))||[];studies=studies.filter(function(study){return study.name!==info.name;});studies.push(info);localStorage.setItem(STUDIES_KEY,JSON.stringify(studies));localStorage.setItem(STUDIES_KEY+'.'+info.name,content);return new Promise(function(resolve){return resolve();});}export function getStudyTemplateContent(_ref3){var name=_ref3.name;var content=localStorage.getItem(STUDIES_KEY+'.'+name);return new Promise(function(resolve){return resolve(content);});}","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/src/components/TradingView/saveLoadAdapter.tsx"],"names":["CHARTS_KEY","STUDIES_KEY","getAllCharts","charts","JSON","parse","localStorage","getItem","Promise","resolve","removeChart","chartId","filter","chart","id","setItem","stringify","removeItem","saveChart","chartData","content","info","Math","floor","random","timestamp","Date","i","length","splice","err","console","log","push","getChartContent","getAllStudyTemplates","studies","removeStudyTemplate","name","study","saveStudyTemplate","getStudyTemplateContent"],"mappings":"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","sourcesContent":["const CHARTS_KEY = 'tradingviewCharts';\nconst STUDIES_KEY = 'tradingviewStudies';\n\n// See https://github.com/tradingview/charting_library/wiki/Widget-Constructor#save_load_adapter\n\nexport function getAllCharts() {\n  // @ts-ignore\n  let charts = JSON.parse(localStorage.getItem(CHARTS_KEY)) || [];\n  return new Promise((resolve) => resolve(charts));\n}\n\nexport function removeChart(chartId) {\n  // @ts-ignore\n  let charts = JSON.parse(localStorage.getItem(CHARTS_KEY)) || [];\n  charts = charts.filter((chart) => chart.id !== chartId);\n  localStorage.setItem(CHARTS_KEY, JSON.stringify(charts));\n  localStorage.removeItem(CHARTS_KEY + '.' + chartId);\n  return new Promise<void>((resolve) => resolve());\n}\n\nexport function saveChart(chartData) {\n  let { content, ...info } = chartData;\n  if (!info.id) {\n    info.id = 'chart' + Math.floor(Math.random() * 1e8);\n  }\n  // @ts-ignore\n  info.timestamp = new Date() - 0;\n  content = JSON.parse(content);\n  content['content'] = JSON.parse(content['content']);\n  // Remove \"study_Overlay\" i.e the indexes\n  try {\n    for (\n      var i = 0;\n      i < content['content']['charts'][0]['panes'][0]['sources'].length;\n      i++\n    ) {\n      if (\n        content['content']['charts'][0]['panes'][0]['sources'][i]['type'] ===\n        'study_Overlay'\n      ) {\n        content['content']['charts'][0]['panes'][0]['sources'].splice(i, 1);\n      }\n    }\n  } catch (err) {\n    console.log(err);\n  }\n  content['content'] = JSON.stringify(content['content']);\n  content = JSON.stringify(content);\n  // @ts-ignore\n  let charts = JSON.parse(localStorage.getItem(CHARTS_KEY)) || [];\n  charts = charts.filter((chart) => chart.id !== info.id);\n  charts.push(info);\n  localStorage.setItem(CHARTS_KEY, JSON.stringify(charts));\n  localStorage.setItem(CHARTS_KEY + '.' + info.id, content);\n\n  return new Promise((resolve) => resolve(info.id));\n}\n\nexport function getChartContent(chartId) {\n  let content = localStorage.getItem(CHARTS_KEY + '.' + chartId);\n  return new Promise((resolve) => resolve(content));\n}\n\nexport function getAllStudyTemplates() {\n  // @ts-ignore\n  let studies = JSON.parse(localStorage.getItem(STUDIES_KEY)) || [];\n  return new Promise((resolve) => resolve(studies));\n}\n\nexport function removeStudyTemplate({ name }) {\n  // @ts-ignore\n  let studies = JSON.parse(localStorage.getItem(STUDIES_KEY)) || [];\n  studies = studies.filter((study) => study.name !== name);\n  localStorage.setItem(STUDIES_KEY, JSON.stringify(studies));\n  localStorage.removeItem(STUDIES_KEY + '.' + name);\n  return new Promise((resolve) => resolve());\n}\n\nexport function saveStudyTemplate({ content, ...info }) {\n  // @ts-ignore\n  let studies = JSON.parse(localStorage.getItem(STUDIES_KEY)) || [];\n  studies = studies.filter((study) => study.name !== info.name);\n  studies.push(info);\n  localStorage.setItem(STUDIES_KEY, JSON.stringify(studies));\n  localStorage.setItem(STUDIES_KEY + '.' + info.name, content);\n  return new Promise((resolve) => resolve());\n}\n\nexport function getStudyTemplateContent({ name }) {\n  let content = localStorage.getItem(STUDIES_KEY + '.' + name);\n  return new Promise((resolve) => resolve(content));\n}\n"]},"metadata":{},"sourceType":"module"}