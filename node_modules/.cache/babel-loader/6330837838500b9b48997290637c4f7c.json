{"ast":null,"code":"var _jsxFileName = \"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/src/pages/pools/NewPoolPage.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { AutoComplete, Button, Form, Input, Switch, Tooltip, Typography } from 'antd';\nimport { PublicKey } from '@solana/web3.js';\nimport { useConnection } from '../../utils/connection';\nimport FloatingElement from '../../components/layout/FloatingElement';\nimport styled from 'styled-components';\nimport { useWallet } from '../../utils/wallet';\nimport { sendSignedTransaction, signTransactions } from '../../utils/send';\nimport { useMintInput } from '../../components/useMintInput';\nimport { PoolTransactions } from '@project-serum/pool';\nimport { useTokenAccounts } from '../../utils/markets';\nimport BN from 'bn.js';\nimport { notify } from '../../utils/notifications';\nimport Link from '../../components/Link';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Text,\n  Title\n} = Typography;\nconst Wrapper = styled.div`\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n`;\n_c = Wrapper;\nconst AddRemoveTokenButtons = styled.div`\n  margin-top: 16px;\n  margin-bottom: 16px;\n`;\n_c2 = AddRemoveTokenButtons;\nconst SIMPLE_POOL_PROGRAM_ID = '71JS8f7y7ASMbuuSMCVG7a3qDdcVco2qYD6bMJeZqUCm';\nconst ADMIN_CONTROLLED_POOL_PROGRAM_ID = 'WvmTNLpGMVbwJVYztYL4Hnsy82cJhQorxjnnXcRm3b6';\nconst DEFAULT_PROGRAM_ID = ADMIN_CONTROLLED_POOL_PROGRAM_ID;\nconst PROGRAM_ID_OPTIONS = [{\n  label: `Simple Pool (${SIMPLE_POOL_PROGRAM_ID})`,\n  value: SIMPLE_POOL_PROGRAM_ID\n}, {\n  label: `Admin-Controlled Pool (${ADMIN_CONTROLLED_POOL_PROGRAM_ID})`,\n  value: ADMIN_CONTROLLED_POOL_PROGRAM_ID\n}];\nexport default function NewPoolPage() {\n  _s();\n\n  const connection = useConnection();\n  const {\n    wallet,\n    connected\n  } = useWallet();\n  const [poolName, setPoolName] = useState('');\n  const [programId, setProgramId] = useState(DEFAULT_PROGRAM_ID);\n  const [initialSupply, setInitialSupply] = useState('1');\n  const [initialAssets, setInitialAssets] = useState([{\n    valid: false\n  }, {\n    valid: false\n  }]);\n  const [adminControlled, setAdminControlled] = useState(false);\n  const [adminAddress, setAdminAddress] = useState('');\n  const [tokenAccounts] = useTokenAccounts();\n  const [submitting, setSubmitting] = useState(false);\n  const [newPoolAddress, setNewPoolAddress] = useState(null);\n  useEffect(() => {\n    if (programId === SIMPLE_POOL_PROGRAM_ID) {\n      setAdminControlled(false);\n    } else if (programId === ADMIN_CONTROLLED_POOL_PROGRAM_ID) {\n      setAdminControlled(true);\n    }\n  }, [programId]);\n  useEffect(() => {\n    if (connected && wallet) {\n      setAdminAddress(wallet.publicKey.toBase58());\n    }\n  }, [wallet, connected]);\n  const canSubmit = connected && poolName.trim() && programId && parseFloat(initialSupply) > 0 && initialAssets.every(asset => asset.valid) && tokenAccounts && (adminAddress || !adminControlled);\n\n  async function onSubmit() {\n    if (!canSubmit || !wallet) {\n      return;\n    }\n\n    setSubmitting(true);\n\n    try {\n      const assets = initialAssets;\n      const [poolAddress, transactionsAndSigners] = await PoolTransactions.initializeSimplePool({\n        connection,\n        programId: new PublicKey(programId),\n        poolName,\n        poolStateSpace: 1024,\n        poolMintDecimals: 6,\n        initialPoolMintSupply: new BN(Math.round(10 ** 6 * parseFloat(initialSupply))),\n        assetMints: assets.map(asset => asset.mint),\n        initialAssetQuantities: assets.map(asset => new BN(asset.quantity)),\n        creator: wallet.publicKey,\n        creatorAssets: assets.map(asset => {\n          const found = tokenAccounts === null || tokenAccounts === void 0 ? void 0 : tokenAccounts.find(tokenAccount => tokenAccount.effectiveMint.equals(asset.mint));\n\n          if (!found) {\n            throw new Error('No token account for ' + asset.mint.toBase58());\n          }\n\n          return found.pubkey;\n        }),\n        additionalAccounts: adminControlled ? [{\n          pubkey: new PublicKey(adminAddress),\n          isSigner: false,\n          isWritable: false\n        }] : []\n      });\n      const signed = await signTransactions({\n        transactionsAndSigners,\n        wallet,\n        connection\n      });\n\n      for (let signedTransaction of signed) {\n        await sendSignedTransaction({\n          signedTransaction,\n          connection\n        });\n      }\n\n      setNewPoolAddress(poolAddress);\n    } catch (e) {\n      console.warn(e);\n      notify({\n        message: 'Error creating new pool',\n        description: e.message,\n        type: 'error'\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(FloatingElement, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 4,\n        children: \"Create new pool\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        layout: \"vertical\",\n        onFinish: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Public name of the pool.\",\n            children: \"Pool Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this),\n          name: \"name\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: poolName,\n            onChange: e => setPoolName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Address of the pool program.\",\n            children: [\"Program ID\", ' ', /*#__PURE__*/_jsxDEV(Text, {\n              type: \"secondary\",\n              children: [\"(e.g. \", DEFAULT_PROGRAM_ID, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this),\n          name: \"programId\",\n          initialValue: DEFAULT_PROGRAM_ID,\n          children: /*#__PURE__*/_jsxDEV(AutoComplete, {\n            value: programId,\n            onChange: value => setProgramId(value),\n            options: PROGRAM_ID_OPTIONS\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Initial number of pool tokens to mint to your account.\",\n            children: \"Initial Pool Token Supply\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this),\n          name: \"initialSupply\",\n          initialValue: \"1\",\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: initialSupply,\n            onChange: e => setInitialSupply(e.target.value.trim()),\n            type: \"number\",\n            min: \"0\",\n            step: \"any\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AddRemoveTokenButtons, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setInitialAssets(assets => assets.concat({\n              valid: false\n            })),\n            children: \"Add token\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setInitialAssets(assets => assets.slice(0, assets.length - 1)),\n            disabled: initialAssets.length <= 1,\n            children: \"Remove token\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), initialAssets.map((asset, i) => /*#__PURE__*/_jsxDEV(AssetInput, {\n          setInitialAssets: setInitialAssets,\n          index: i\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Whether the assets in the pool can be controlled by the pool admin.\",\n            children: \"Admin Controlled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this),\n          name: \"adminControlled\",\n          children: /*#__PURE__*/_jsxDEV(Switch, {\n            checked: adminControlled,\n            onChange: checked => setAdminControlled(checked),\n            disabled: programId === SIMPLE_POOL_PROGRAM_ID || programId === ADMIN_CONTROLLED_POOL_PROGRAM_ID\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), adminControlled ? /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Address of the pool admin account.\",\n            children: \"Admin Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 17\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            value: adminAddress,\n            onChange: e => setAdminAddress(e.target.value.trim())\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this) : null, /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \" \",\n          colon: false,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            disabled: !canSubmit,\n            loading: submitting,\n            children: connected ? 'Submit' : 'Not connected to wallet'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), newPoolAddress ? /*#__PURE__*/_jsxDEV(FloatingElement, {\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        children: [\"New pool address:\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n          to: `/pools/${newPoolAddress.toBase58()}`,\n          children: newPoolAddress.toBase58()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewPoolPage, \"eFyyhnt1/NoPR//lTCtXzYkict0=\", false, function () {\n  return [useConnection, useWallet, useTokenAccounts];\n});\n\n_c3 = NewPoolPage;\n\nfunction AssetInput(_ref) {\n  _s2();\n\n  let {\n    setInitialAssets,\n    index\n  } = _ref;\n  const [mintInput, mintInfo] = useMintInput(`mint${index}`, /*#__PURE__*/_jsxDEV(Text, {\n    children: [\"Token \", index + 1, \" Mint Address\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\"Token mint address for token \", index + 1, \".\"]\n  }, void 0, true));\n  const [quantity, setQuantity] = useState('');\n  useEffect(() => {\n    let change;\n\n    if (mintInfo && parseFloat(quantity) >= 0) {\n      let parsedQuantity = Math.round(10 ** mintInfo.decimals * parseFloat(quantity));\n      change = {\n        mint: mintInfo.address,\n        quantity: parsedQuantity,\n        valid: true\n      };\n    } else {\n      change = {\n        valid: false\n      };\n    }\n\n    setInitialAssets(assets => assets.map((old, i) => i === index ? change : old));\n  }, [setInitialAssets, index, mintInfo, quantity]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [mintInput, /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Initial quantity of token \", index + 1, \" to deposit into the pool.\"]\n        }, void 0, true),\n        children: [\"Token \", index + 1, \" Initial Quantity\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }, this),\n      name: `quantity${index}`,\n      validateStatus: 'success',\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        value: quantity,\n        onChange: e => setQuantity(e.target.value.trim()),\n        type: \"number\",\n        min: \"0\",\n        step: \"any\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(AssetInput, \"o/NLzhgc7ZT1kXOlPiYUlXWfnHw=\", false, function () {\n  return [useMintInput];\n});\n\n_c4 = AssetInput;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"AddRemoveTokenButtons\");\n$RefreshReg$(_c3, \"NewPoolPage\");\n$RefreshReg$(_c4, \"AssetInput\");","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/src/pages/pools/NewPoolPage.tsx"],"names":["React","useEffect","useState","AutoComplete","Button","Form","Input","Switch","Tooltip","Typography","PublicKey","useConnection","FloatingElement","styled","useWallet","sendSignedTransaction","signTransactions","useMintInput","PoolTransactions","useTokenAccounts","BN","notify","Link","Text","Title","Wrapper","div","AddRemoveTokenButtons","SIMPLE_POOL_PROGRAM_ID","ADMIN_CONTROLLED_POOL_PROGRAM_ID","DEFAULT_PROGRAM_ID","PROGRAM_ID_OPTIONS","label","value","NewPoolPage","connection","wallet","connected","poolName","setPoolName","programId","setProgramId","initialSupply","setInitialSupply","initialAssets","setInitialAssets","valid","adminControlled","setAdminControlled","adminAddress","setAdminAddress","tokenAccounts","submitting","setSubmitting","newPoolAddress","setNewPoolAddress","publicKey","toBase58","canSubmit","trim","parseFloat","every","asset","onSubmit","assets","poolAddress","transactionsAndSigners","initializeSimplePool","poolStateSpace","poolMintDecimals","initialPoolMintSupply","Math","round","assetMints","map","mint","initialAssetQuantities","quantity","creator","creatorAssets","found","find","tokenAccount","effectiveMint","equals","Error","pubkey","additionalAccounts","isSigner","isWritable","signed","signedTransaction","e","console","warn","message","description","type","target","concat","slice","length","i","checked","AssetInput","index","mintInput","mintInfo","setQuantity","change","parsedQuantity","decimals","address","old"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  AutoComplete,\n  Button,\n  Form,\n  Input,\n  Switch,\n  Tooltip,\n  Typography,\n} from 'antd';\nimport { PublicKey } from '@solana/web3.js';\nimport { useConnection } from '../../utils/connection';\nimport FloatingElement from '../../components/layout/FloatingElement';\nimport styled from 'styled-components';\nimport { useWallet } from '../../utils/wallet';\nimport { sendSignedTransaction, signTransactions } from '../../utils/send';\nimport { useMintInput } from '../../components/useMintInput';\nimport { PoolTransactions } from '@project-serum/pool';\nimport { useTokenAccounts } from '../../utils/markets';\nimport BN from 'bn.js';\nimport { notify } from '../../utils/notifications';\nimport Link from '../../components/Link';\n\nconst { Text, Title } = Typography;\n\nconst Wrapper = styled.div`\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n`;\n\nconst AddRemoveTokenButtons = styled.div`\n  margin-top: 16px;\n  margin-bottom: 16px;\n`;\n\nconst SIMPLE_POOL_PROGRAM_ID = '71JS8f7y7ASMbuuSMCVG7a3qDdcVco2qYD6bMJeZqUCm';\nconst ADMIN_CONTROLLED_POOL_PROGRAM_ID =\n  'WvmTNLpGMVbwJVYztYL4Hnsy82cJhQorxjnnXcRm3b6';\nconst DEFAULT_PROGRAM_ID = ADMIN_CONTROLLED_POOL_PROGRAM_ID;\nconst PROGRAM_ID_OPTIONS = [\n  {\n    label: `Simple Pool (${SIMPLE_POOL_PROGRAM_ID})`,\n    value: SIMPLE_POOL_PROGRAM_ID,\n  },\n  {\n    label: `Admin-Controlled Pool (${ADMIN_CONTROLLED_POOL_PROGRAM_ID})`,\n    value: ADMIN_CONTROLLED_POOL_PROGRAM_ID,\n  },\n];\n\nexport default function NewPoolPage() {\n  const connection = useConnection();\n  const { wallet, connected } = useWallet();\n  const [poolName, setPoolName] = useState('');\n  const [programId, setProgramId] = useState(DEFAULT_PROGRAM_ID);\n  const [initialSupply, setInitialSupply] = useState('1');\n  const [initialAssets, setInitialAssets] = useState<InitialAsset[]>([\n    { valid: false },\n    { valid: false },\n  ]);\n  const [adminControlled, setAdminControlled] = useState(false);\n  const [adminAddress, setAdminAddress] = useState('');\n  const [tokenAccounts] = useTokenAccounts();\n  const [submitting, setSubmitting] = useState(false);\n  const [newPoolAddress, setNewPoolAddress] = useState<PublicKey | null>(null);\n\n  useEffect(() => {\n    if (programId === SIMPLE_POOL_PROGRAM_ID) {\n      setAdminControlled(false);\n    } else if (programId === ADMIN_CONTROLLED_POOL_PROGRAM_ID) {\n      setAdminControlled(true);\n    }\n  }, [programId]);\n\n  useEffect(() => {\n    if (connected && wallet) {\n      setAdminAddress(wallet.publicKey.toBase58());\n    }\n  }, [wallet, connected]);\n\n  const canSubmit =\n    connected &&\n    poolName.trim() &&\n    programId &&\n    parseFloat(initialSupply) > 0 &&\n    initialAssets.every((asset) => asset.valid) &&\n    tokenAccounts &&\n    (adminAddress || !adminControlled);\n\n  async function onSubmit() {\n    if (!canSubmit || !wallet) {\n      return;\n    }\n    setSubmitting(true);\n    try {\n      const assets = initialAssets as ValidInitialAsset[];\n      const [\n        poolAddress,\n        transactionsAndSigners,\n      ] = await PoolTransactions.initializeSimplePool({\n        connection,\n        programId: new PublicKey(programId),\n        poolName,\n        poolStateSpace: 1024,\n        poolMintDecimals: 6,\n        initialPoolMintSupply: new BN(\n          Math.round(10 ** 6 * parseFloat(initialSupply)),\n        ),\n        assetMints: assets.map((asset) => asset.mint),\n        initialAssetQuantities: assets.map((asset) => new BN(asset.quantity)),\n        creator: wallet.publicKey,\n        creatorAssets: assets.map((asset) => {\n          const found = tokenAccounts?.find((tokenAccount) =>\n            tokenAccount.effectiveMint.equals(asset.mint),\n          );\n          if (!found) {\n            throw new Error('No token account for ' + asset.mint.toBase58());\n          }\n          return found.pubkey;\n        }),\n        additionalAccounts: adminControlled\n          ? [\n              {\n                pubkey: new PublicKey(adminAddress),\n                isSigner: false,\n                isWritable: false,\n              },\n            ]\n          : [],\n      });\n      const signed = await signTransactions({\n        transactionsAndSigners,\n        wallet,\n        connection,\n      });\n      for (let signedTransaction of signed) {\n        await sendSignedTransaction({ signedTransaction, connection });\n      }\n      setNewPoolAddress(poolAddress);\n    } catch (e) {\n      console.warn(e);\n      notify({\n        message: 'Error creating new pool',\n        description: e.message,\n        type: 'error',\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return (\n    <Wrapper>\n      <FloatingElement>\n        <Title level={4}>Create new pool</Title>\n        <Form layout=\"vertical\" onFinish={onSubmit}>\n          <Form.Item\n            label={\n              <Tooltip title=\"Public name of the pool.\">Pool Name</Tooltip>\n            }\n            name=\"name\"\n          >\n            <Input\n              value={poolName}\n              onChange={(e) => setPoolName(e.target.value)}\n            />\n          </Form.Item>\n          <Form.Item\n            label={\n              <Tooltip title=\"Address of the pool program.\">\n                Program ID{' '}\n                <Text type=\"secondary\">(e.g. {DEFAULT_PROGRAM_ID})</Text>\n              </Tooltip>\n            }\n            name=\"programId\"\n            initialValue={DEFAULT_PROGRAM_ID}\n          >\n            <AutoComplete\n              value={programId}\n              onChange={(value) => setProgramId(value)}\n              options={PROGRAM_ID_OPTIONS}\n            />\n          </Form.Item>\n          <Form.Item\n            label={\n              <Tooltip title=\"Initial number of pool tokens to mint to your account.\">\n                Initial Pool Token Supply\n              </Tooltip>\n            }\n            name=\"initialSupply\"\n            initialValue=\"1\"\n          >\n            <Input\n              value={initialSupply}\n              onChange={(e) => setInitialSupply(e.target.value.trim())}\n              type=\"number\"\n              min=\"0\"\n              step=\"any\"\n            />\n          </Form.Item>\n          <AddRemoveTokenButtons>\n            <Button\n              onClick={() =>\n                setInitialAssets((assets) => assets.concat({ valid: false }))\n              }\n            >\n              Add token\n            </Button>{' '}\n            <Button\n              onClick={() =>\n                setInitialAssets((assets) => assets.slice(0, assets.length - 1))\n              }\n              disabled={initialAssets.length <= 1}\n            >\n              Remove token\n            </Button>\n          </AddRemoveTokenButtons>\n          {initialAssets.map((asset, i) => (\n            <AssetInput setInitialAssets={setInitialAssets} index={i} key={i} />\n          ))}\n          <Form.Item\n            label={\n              <Tooltip title=\"Whether the assets in the pool can be controlled by the pool admin.\">\n                Admin Controlled\n              </Tooltip>\n            }\n            name=\"adminControlled\"\n          >\n            <Switch\n              checked={adminControlled}\n              onChange={(checked) => setAdminControlled(checked)}\n              disabled={\n                programId === SIMPLE_POOL_PROGRAM_ID ||\n                programId === ADMIN_CONTROLLED_POOL_PROGRAM_ID\n              }\n            />\n          </Form.Item>\n          {adminControlled ? (\n            <Form.Item\n              label={\n                <Tooltip title=\"Address of the pool admin account.\">\n                  Admin Address\n                </Tooltip>\n              }\n            >\n              <Input\n                value={adminAddress}\n                onChange={(e) => setAdminAddress(e.target.value.trim())}\n              />\n            </Form.Item>\n          ) : null}\n          <Form.Item label=\" \" colon={false}>\n            <Button\n              type=\"primary\"\n              htmlType=\"submit\"\n              disabled={!canSubmit}\n              loading={submitting}\n            >\n              {connected ? 'Submit' : 'Not connected to wallet'}\n            </Button>\n          </Form.Item>\n        </Form>\n      </FloatingElement>\n      {newPoolAddress ? (\n        <FloatingElement>\n          <Text>\n            New pool address:{' '}\n            <Link to={`/pools/${newPoolAddress.toBase58()}`}>\n              {newPoolAddress.toBase58()}\n            </Link>\n          </Text>\n        </FloatingElement>\n      ) : null}\n    </Wrapper>\n  );\n}\n\ntype InitialAsset = { valid: false } | ValidInitialAsset;\ninterface ValidInitialAsset {\n  valid: true;\n  mint: PublicKey;\n  quantity: number;\n}\n\nfunction AssetInput({ setInitialAssets, index }) {\n  const [mintInput, mintInfo] = useMintInput(\n    `mint${index}`,\n    <Text>Token {index + 1} Mint Address</Text>,\n    <>Token mint address for token {index + 1}.</>,\n  );\n  const [quantity, setQuantity] = useState('');\n\n  useEffect(() => {\n    let change: InitialAsset;\n    if (mintInfo && parseFloat(quantity) >= 0) {\n      let parsedQuantity = Math.round(\n        10 ** mintInfo.decimals * parseFloat(quantity),\n      );\n      change = {\n        mint: mintInfo.address,\n        quantity: parsedQuantity,\n        valid: true,\n      };\n    } else {\n      change = { valid: false };\n    }\n    setInitialAssets((assets: InitialAsset[]) =>\n      assets.map((old, i) => (i === index ? change : old)),\n    );\n  }, [setInitialAssets, index, mintInfo, quantity]);\n\n  return (\n    <>\n      {mintInput}\n      <Form.Item\n        label={\n          <Tooltip\n            title={\n              <>\n                Initial quantity of token {index + 1} to deposit into the pool.\n              </>\n            }\n          >\n            Token {index + 1} Initial Quantity\n          </Tooltip>\n        }\n        name={`quantity${index}`}\n        validateStatus={'success'}\n      >\n        <Input\n          value={quantity}\n          onChange={(e) => setQuantity(e.target.value.trim())}\n          type=\"number\"\n          min=\"0\"\n          step=\"any\"\n        />\n      </Form.Item>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}