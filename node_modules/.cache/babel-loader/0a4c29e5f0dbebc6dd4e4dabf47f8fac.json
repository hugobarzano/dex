{"ast":null,"code":"var _jsxFileName = \"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/src/pages/pools/PoolPage/PoolAdminPanel.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$(),\n    _s7 = $RefreshSig$(),\n    _s8 = $RefreshSig$(),\n    _s9 = $RefreshSig$(),\n    _s10 = $RefreshSig$();\n\nimport React, { FormEvent, useMemo, useState } from 'react';\nimport { AdminControlledPoolInstructions } from '@project-serum/pool';\nimport { TokenInstructions } from '@project-serum/serum';\nimport FloatingElement from '../../../components/layout/FloatingElement';\nimport { useConnection } from '../../../utils/connection';\nimport { useWallet } from '../../../utils/wallet';\nimport { getSelectedTokenAccountForMint, useTokenAccounts } from '../../../utils/markets';\nimport { sendTransaction } from '../../../utils/send';\nimport { notify } from '../../../utils/notifications';\nimport { Account, PublicKey, SystemProgram, Transaction } from '@solana/web3.js';\nimport { AutoComplete, Button, Input, Select, Tabs } from 'antd';\nimport { createAssociatedTokenAccount, getAssociatedTokenAddress } from '@project-serum/associated-token';\nimport { parseTokenMintData, useMintToTickers } from '../../../utils/tokens';\nimport BN from 'bn.js';\nimport { refreshAllCaches } from '../../../utils/fetch-loop';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  TabPane\n} = Tabs;\nconst {\n  Option\n} = Select;\nexport function PoolAdminPanel(_ref) {\n  let {\n    poolInfo\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(FloatingElement, {\n    children: /*#__PURE__*/_jsxDEV(Tabs, {\n      children: [/*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Pause/Unpause\",\n        children: /*#__PURE__*/_jsxDEV(PauseUnpauseTab, {\n          poolInfo: poolInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }, this)\n      }, \"pause\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Add Token\",\n        children: /*#__PURE__*/_jsxDEV(AddAssetTab, {\n          poolInfo: poolInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this)\n      }, \"addAsset\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Remove Token\",\n        children: /*#__PURE__*/_jsxDEV(RemoveAssetTab, {\n          poolInfo: poolInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)\n      }, \"removeAsset\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Deposit\",\n        children: /*#__PURE__*/_jsxDEV(DepositTab, {\n          poolInfo: poolInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)\n      }, \"deposit\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Withdraw\",\n        children: /*#__PURE__*/_jsxDEV(WithdrawTab, {\n          poolInfo: poolInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)\n      }, \"withdraw\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n        tab: \"Modify Fee\",\n        children: /*#__PURE__*/_jsxDEV(UpdateFeeTab, {\n          poolInfo: poolInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)\n      }, \"updateFee\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_c = PoolAdminPanel;\n\nfunction PauseUnpauseTab(_ref2) {\n  _s();\n\n  let {\n    poolInfo\n  } = _ref2;\n  const connection = useConnection();\n  const {\n    wallet,\n    connected\n  } = useWallet();\n  const [submitting, setSubmitting] = useState(false);\n\n  async function sendPause() {\n    if (!connected || !wallet) {\n      return;\n    }\n\n    setSubmitting(true);\n\n    try {\n      const transaction = new Transaction();\n      transaction.add(AdminControlledPoolInstructions.pause(poolInfo));\n      await sendTransaction({\n        connection,\n        wallet,\n        transaction\n      });\n    } catch (e) {\n      notify({\n        message: 'Error pausing pool',\n        description: e.message,\n        type: 'error'\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  async function sendUnpause() {\n    if (!connected || !wallet) {\n      return;\n    }\n\n    setSubmitting(true);\n\n    try {\n      const transaction = new Transaction();\n      transaction.add(AdminControlledPoolInstructions.unpause(poolInfo));\n      await sendTransaction({\n        connection,\n        wallet,\n        transaction\n      });\n    } catch (e) {\n      notify({\n        message: 'Error unpausing pool',\n        description: e.message,\n        type: 'error'\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      onClick: sendPause,\n      disabled: submitting,\n      children: \"Pause\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n      onClick: sendUnpause,\n      disabled: submitting,\n      children: \"Unpause\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PauseUnpauseTab, \"cDatuPsUP5zho7hihGVFbWU/27Y=\", false, function () {\n  return [useConnection, useWallet];\n});\n\n_c2 = PauseUnpauseTab;\n\nfunction AddAssetTab(_ref3) {\n  _s2();\n\n  let {\n    poolInfo\n  } = _ref3;\n  const connection = useConnection();\n  const [address, setAddress] = useState('');\n  const {\n    wallet,\n    connected\n  } = useWallet();\n  const canSubmit = connected && address;\n  const [onSubmit, submitting] = useOnSubmitHandler('adding asset to pool', async () => {\n    const mintAddress = new PublicKey(address);\n    const vaultAddress = await getAssociatedTokenAddress(poolInfo.state.vaultSigner, mintAddress);\n    const transaction = new Transaction();\n\n    if (!(await connection.getAccountInfo(vaultAddress)) && wallet) {\n      transaction.add(await createAssociatedTokenAccount(wallet.publicKey, poolInfo.state.vaultSigner, mintAddress));\n    }\n\n    transaction.add(AdminControlledPoolInstructions.addAsset(poolInfo, vaultAddress));\n    return [transaction, []];\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    children: [/*#__PURE__*/_jsxDEV(MintSelector, {\n      label: \"Token Mint Address\",\n      value: address,\n      onChange: value => setAddress(value),\n      style: {\n        marginBottom: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      canSubmit: canSubmit,\n      submitting: submitting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(AddAssetTab, \"NpKSxsgAfvZPi7nXp5jq1DiIV/s=\", false, function () {\n  return [useConnection, useWallet, useOnSubmitHandler];\n});\n\n_c3 = AddAssetTab;\n\nfunction RemoveAssetTab(_ref4) {\n  _s3();\n\n  let {\n    poolInfo\n  } = _ref4;\n  const [address, setAddress] = useState('');\n  const {\n    connected\n  } = useWallet();\n  const canSubmit = connected && address;\n  const [onSubmit, submitting] = useOnSubmitHandler('removing asset from pool', async () => {\n    var _poolInfo$state$asset;\n\n    const mintAddress = new PublicKey(address);\n    const vaultAddress = (_poolInfo$state$asset = poolInfo.state.assets.find(asset => asset.mint.equals(mintAddress))) === null || _poolInfo$state$asset === void 0 ? void 0 : _poolInfo$state$asset.vaultAddress;\n\n    if (!vaultAddress) {\n      throw new Error('Asset not in pool');\n    }\n\n    const transaction = new Transaction();\n    transaction.add(AdminControlledPoolInstructions.removeAsset(poolInfo, vaultAddress));\n    return [transaction, []];\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    children: [/*#__PURE__*/_jsxDEV(MintInPoolSelector, {\n      poolInfo: poolInfo,\n      label: \"Token Mint Address\",\n      value: address,\n      onChange: value => setAddress(value),\n      style: {\n        marginBottom: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      canSubmit: canSubmit,\n      submitting: submitting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n}\n\n_s3(RemoveAssetTab, \"CwfHzvtjGlOf3bWW4vjQYCnAZs0=\", false, function () {\n  return [useWallet, useOnSubmitHandler];\n});\n\n_c4 = RemoveAssetTab;\n\nfunction DepositTab(_ref5) {\n  _s4();\n\n  let {\n    poolInfo\n  } = _ref5;\n  const [address, setAddress] = useState('');\n  const [quantity, setQuantity] = useState('');\n  const connection = useConnection();\n  const {\n    wallet,\n    connected\n  } = useWallet();\n  const [tokenAccounts] = useTokenAccounts();\n  const canSubmit = connected && address && tokenAccounts && parseFloat(quantity);\n  const [onSubmit, submitting] = useOnSubmitHandler('depositing to pool', async () => {\n    var _poolInfo$state$asset2;\n\n    if (!wallet) {\n      throw new Error('Wallet is not connected');\n    }\n\n    const mintAddress = new PublicKey(address);\n    const vaultAddress = (_poolInfo$state$asset2 = poolInfo.state.assets.find(asset => asset.mint.equals(mintAddress))) === null || _poolInfo$state$asset2 === void 0 ? void 0 : _poolInfo$state$asset2.vaultAddress;\n\n    if (!vaultAddress) {\n      throw new Error('Asset not in pool');\n    }\n\n    const walletTokenAccount = getSelectedTokenAccountForMint(tokenAccounts, mintAddress);\n\n    if (!walletTokenAccount) {\n      throw new Error('Asset not in wallet');\n    }\n\n    const mintAccountInfo = await connection.getAccountInfo(mintAddress);\n\n    if (!mintAccountInfo) {\n      throw new Error('Mint not found');\n    }\n\n    const mintDecimals = parseTokenMintData(mintAccountInfo.data).decimals;\n    const parsedQuantity = Math.round(parseFloat(quantity) * 10 ** mintDecimals);\n    const wrappedSolAccount = mintAddress.equals(TokenInstructions.WRAPPED_SOL_MINT) && walletTokenAccount.pubkey.equals(wallet.publicKey) ? new Account() : null;\n    const transaction = new Transaction();\n    const signers = [];\n\n    if (wrappedSolAccount) {\n      transaction.add(SystemProgram.createAccount({\n        fromPubkey: wallet.publicKey,\n        lamports: parsedQuantity + 2.04e6,\n        newAccountPubkey: wrappedSolAccount.publicKey,\n        programId: TokenInstructions.TOKEN_PROGRAM_ID,\n        space: 165\n      }), TokenInstructions.initializeAccount({\n        account: wrappedSolAccount.publicKey,\n        mint: TokenInstructions.WRAPPED_SOL_MINT,\n        owner: wallet.publicKey\n      }), TokenInstructions.transfer({\n        source: wrappedSolAccount.publicKey,\n        destination: vaultAddress,\n        amount: parsedQuantity,\n        owner: wallet.publicKey\n      }), TokenInstructions.closeAccount({\n        source: wrappedSolAccount.publicKey,\n        destination: walletTokenAccount.pubkey,\n        owner: wallet.publicKey\n      }));\n      signers.push(wrappedSolAccount);\n    } else {\n      transaction.add(TokenInstructions.transfer({\n        source: walletTokenAccount.pubkey,\n        destination: vaultAddress,\n        amount: parsedQuantity,\n        owner: wallet.publicKey\n      }));\n    }\n\n    return [transaction, signers];\n  }, true);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    children: [/*#__PURE__*/_jsxDEV(MintInPoolSelector, {\n      poolInfo: poolInfo,\n      label: \"Token Mint Address\",\n      value: address,\n      onChange: value => setAddress(value),\n      style: {\n        marginBottom: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      addonBefore: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"Quantity\"\n      }, void 0, false),\n      value: quantity,\n      onChange: e => setQuantity(e.target.value.trim()),\n      style: {\n        marginBottom: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      canSubmit: canSubmit,\n      submitting: submitting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 5\n  }, this);\n}\n\n_s4(DepositTab, \"qAK0bdG6yDeXm36SFvHB+uSJ7Ks=\", false, function () {\n  return [useConnection, useWallet, useTokenAccounts, useOnSubmitHandler];\n});\n\n_c5 = DepositTab;\n\nfunction WithdrawTab(_ref6) {\n  _s5();\n\n  let {\n    poolInfo\n  } = _ref6;\n  const [address, setAddress] = useState('');\n  const [quantity, setQuantity] = useState('');\n  const connection = useConnection();\n  const {\n    wallet,\n    connected\n  } = useWallet();\n  const [tokenAccounts] = useTokenAccounts();\n  const canSubmit = connected && address && tokenAccounts && parseFloat(quantity);\n  const [onSubmit, submitting] = useOnSubmitHandler('withdrawing from pool', async () => {\n    var _poolInfo$state$asset3;\n\n    if (!wallet) {\n      throw new Error('Wallet is not connected');\n    }\n\n    const mintAddress = new PublicKey(address);\n    const vaultAddress = (_poolInfo$state$asset3 = poolInfo.state.assets.find(asset => asset.mint.equals(mintAddress))) === null || _poolInfo$state$asset3 === void 0 ? void 0 : _poolInfo$state$asset3.vaultAddress;\n\n    if (!vaultAddress) {\n      throw new Error('Asset not in pool');\n    }\n\n    const walletTokenAccount = getSelectedTokenAccountForMint(tokenAccounts, mintAddress);\n\n    if (!walletTokenAccount) {\n      throw new Error('Asset not in wallet');\n    }\n\n    const mintAccountInfo = await connection.getAccountInfo(mintAddress);\n\n    if (!mintAccountInfo) {\n      throw new Error('Mint not found');\n    }\n\n    const mintDecimals = parseTokenMintData(mintAccountInfo.data).decimals;\n    const parsedQuantity = Math.round(parseFloat(quantity) * 10 ** mintDecimals);\n    const wrappedSolAccount = mintAddress.equals(TokenInstructions.WRAPPED_SOL_MINT) && walletTokenAccount.pubkey.equals(wallet.publicKey) ? new Account() : null;\n    const transaction = new Transaction();\n    const signers = [];\n\n    if (wrappedSolAccount) {\n      transaction.add(SystemProgram.createAccount({\n        fromPubkey: wallet.publicKey,\n        lamports: 2.04e6,\n        newAccountPubkey: wrappedSolAccount.publicKey,\n        programId: TokenInstructions.TOKEN_PROGRAM_ID,\n        space: 165\n      }), TokenInstructions.initializeAccount({\n        account: wrappedSolAccount.publicKey,\n        mint: TokenInstructions.WRAPPED_SOL_MINT,\n        owner: wallet.publicKey\n      }));\n      signers.push(wrappedSolAccount);\n    }\n\n    transaction.add(AdminControlledPoolInstructions.approveDelegate(poolInfo, vaultAddress, wallet.publicKey, new BN(parsedQuantity)));\n\n    if (wrappedSolAccount) {\n      transaction.add(TokenInstructions.transfer({\n        source: vaultAddress,\n        destination: wrappedSolAccount.publicKey,\n        amount: parsedQuantity,\n        owner: wallet.publicKey\n      }), TokenInstructions.closeAccount({\n        source: wrappedSolAccount.publicKey,\n        destination: walletTokenAccount.pubkey,\n        owner: wallet.publicKey\n      }));\n    } else {\n      transaction.add(TokenInstructions.transfer({\n        source: vaultAddress,\n        destination: walletTokenAccount.pubkey,\n        amount: parsedQuantity,\n        owner: wallet.publicKey\n      }));\n    }\n\n    return [transaction, signers];\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    children: [/*#__PURE__*/_jsxDEV(MintInPoolSelector, {\n      poolInfo: poolInfo,\n      label: \"Token Mint Address\",\n      value: address,\n      onChange: value => setAddress(value),\n      style: {\n        marginBottom: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      addonBefore: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"Quantity\"\n      }, void 0, false),\n      value: quantity,\n      onChange: e => setQuantity(e.target.value.trim()),\n      style: {\n        marginBottom: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      canSubmit: canSubmit,\n      submitting: submitting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 414,\n    columnNumber: 5\n  }, this);\n}\n\n_s5(WithdrawTab, \"qAK0bdG6yDeXm36SFvHB+uSJ7Ks=\", false, function () {\n  return [useConnection, useWallet, useTokenAccounts, useOnSubmitHandler];\n});\n\n_c6 = WithdrawTab;\n\nfunction UpdateFeeTab(_ref7) {\n  _s6();\n\n  let {\n    poolInfo\n  } = _ref7;\n  const [feeRate, setFeeRate] = useState('');\n  const {\n    connected\n  } = useWallet();\n  const [tokenAccounts] = useTokenAccounts();\n  const canSubmit = connected && tokenAccounts && parseFloat(feeRate);\n  const [onSubmit, submitting] = useOnSubmitHandler('changing pool fee', async () => {\n    const transaction = new Transaction();\n    transaction.add(AdminControlledPoolInstructions.updateFee(poolInfo, Math.round(parseFloat(feeRate) * 1000000)));\n    return [transaction, []];\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    children: [/*#__PURE__*/_jsxDEV(Input, {\n      addonBefore: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"Fee Rate\"\n      }, void 0, false),\n      value: feeRate,\n      onChange: e => setFeeRate(e.target.value.trim()),\n      style: {\n        marginBottom: 24\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      canSubmit: canSubmit,\n      submitting: submitting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 455,\n    columnNumber: 5\n  }, this);\n}\n\n_s6(UpdateFeeTab, \"dglu3RMNOKJ3l0veQf16xSMTotA=\", false, function () {\n  return [useWallet, useTokenAccounts, useOnSubmitHandler];\n});\n\n_c7 = UpdateFeeTab;\n\nfunction useOnSubmitHandler(description, makeTransaction) {\n  _s7();\n\n  let refresh = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  const connection = useConnection();\n  const {\n    wallet,\n    connected\n  } = useWallet();\n  const [submitting, setSubmitting] = useState(false);\n\n  async function onSubmit(e) {\n    e.preventDefault();\n\n    if (submitting) {\n      return;\n    }\n\n    setSubmitting(true);\n\n    try {\n      if (!connected || !wallet) {\n        throw new Error('Wallet not connected');\n      }\n\n      const [transaction, signers] = await makeTransaction();\n      await sendTransaction({\n        connection,\n        wallet,\n        transaction,\n        signers\n      });\n\n      if (refresh) {\n        refreshAllCaches();\n      }\n    } catch (e) {\n      notify({\n        message: `Error ${description}`,\n        description: e.message,\n        type: 'error'\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return [onSubmit, submitting];\n}\n\n_s7(useOnSubmitHandler, \"cDatuPsUP5zho7hihGVFbWU/27Y=\", false, function () {\n  return [useConnection, useWallet];\n});\n\nfunction SubmitButton(_ref8) {\n  _s8();\n\n  let {\n    canSubmit,\n    submitting\n  } = _ref8;\n  const {\n    connected\n  } = useWallet();\n  return /*#__PURE__*/_jsxDEV(Button, {\n    htmlType: \"submit\",\n    type: \"primary\",\n    disabled: !canSubmit || submitting,\n    children: !connected ? 'Wallet not connected' : 'Submit'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 508,\n    columnNumber: 5\n  }, this);\n}\n\n_s8(SubmitButton, \"W/w+TlnUcFrU2S5cXLIm2XS6eug=\", false, function () {\n  return [useWallet];\n});\n\n_c8 = SubmitButton;\n\nfunction MintInPoolSelector(_ref9) {\n  _s9();\n\n  let {\n    poolInfo,\n    label,\n    value,\n    onChange,\n    style\n  } = _ref9;\n  const mintToTickers = useMintToTickers();\n  return /*#__PURE__*/_jsxDEV(Input.Group, {\n    style: style,\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"ant-input-group-addon\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Select, {\n      onChange: onChange,\n      value: value,\n      style: {\n        width: '100%'\n      },\n      children: poolInfo.state.assets.map(asset => /*#__PURE__*/_jsxDEV(Option, {\n        value: asset.mint.toBase58(),\n        children: mintToTickers[asset.mint.toBase58()] ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [mintToTickers[asset.mint.toBase58()], \" (\", asset.mint.toBase58(), \")\"]\n        }, void 0, true) : asset.mint.toBase58()\n      }, asset.mint.toBase58(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 533,\n    columnNumber: 5\n  }, this);\n}\n\n_s9(MintInPoolSelector, \"TnZS7K9DF2jr53IiNGvmVtOIz3w=\", false, function () {\n  return [useMintToTickers];\n});\n\n_c9 = MintInPoolSelector;\n\nfunction MintSelector(_ref10) {\n  _s10();\n\n  let {\n    label,\n    style,\n    value,\n    onChange\n  } = _ref10;\n  const mintToTickers = useMintToTickers();\n  const options = useMemo(() => {\n    return Object.entries(mintToTickers).filter(_ref11 => {\n      let [mintAddress, ticker] = _ref11;\n      return mintAddress.includes(value) || ticker.toLowerCase().includes(value.toLowerCase());\n    }).map(_ref12 => {\n      let [mintAddress, ticker] = _ref12;\n      return {\n        value: mintAddress,\n        label: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [ticker, \" (\", mintAddress, \")\"]\n        }, void 0, true)\n      };\n    });\n  }, [mintToTickers, value]);\n  return /*#__PURE__*/_jsxDEV(Input.Group, {\n    style: style,\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"ant-input-group-addon\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AutoComplete, {\n      options: options,\n      value: value,\n      onChange: e => onChange(e),\n      style: {\n        width: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 571,\n    columnNumber: 5\n  }, this);\n}\n\n_s10(MintSelector, \"Sh05RlpjqZtze+wVdoo0MPhfpUA=\", false, function () {\n  return [useMintToTickers];\n});\n\n_c10 = MintSelector;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"PoolAdminPanel\");\n$RefreshReg$(_c2, \"PauseUnpauseTab\");\n$RefreshReg$(_c3, \"AddAssetTab\");\n$RefreshReg$(_c4, \"RemoveAssetTab\");\n$RefreshReg$(_c5, \"DepositTab\");\n$RefreshReg$(_c6, \"WithdrawTab\");\n$RefreshReg$(_c7, \"UpdateFeeTab\");\n$RefreshReg$(_c8, \"SubmitButton\");\n$RefreshReg$(_c9, \"MintInPoolSelector\");\n$RefreshReg$(_c10, \"MintSelector\");","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/src/pages/pools/PoolPage/PoolAdminPanel.tsx"],"names":["React","FormEvent","useMemo","useState","AdminControlledPoolInstructions","TokenInstructions","FloatingElement","useConnection","useWallet","getSelectedTokenAccountForMint","useTokenAccounts","sendTransaction","notify","Account","PublicKey","SystemProgram","Transaction","AutoComplete","Button","Input","Select","Tabs","createAssociatedTokenAccount","getAssociatedTokenAddress","parseTokenMintData","useMintToTickers","BN","refreshAllCaches","TabPane","Option","PoolAdminPanel","poolInfo","PauseUnpauseTab","connection","wallet","connected","submitting","setSubmitting","sendPause","transaction","add","pause","e","message","description","type","sendUnpause","unpause","AddAssetTab","address","setAddress","canSubmit","onSubmit","useOnSubmitHandler","mintAddress","vaultAddress","state","vaultSigner","getAccountInfo","publicKey","addAsset","value","marginBottom","RemoveAssetTab","assets","find","asset","mint","equals","Error","removeAsset","DepositTab","quantity","setQuantity","tokenAccounts","parseFloat","walletTokenAccount","mintAccountInfo","mintDecimals","data","decimals","parsedQuantity","Math","round","wrappedSolAccount","WRAPPED_SOL_MINT","pubkey","signers","createAccount","fromPubkey","lamports","newAccountPubkey","programId","TOKEN_PROGRAM_ID","space","initializeAccount","account","owner","transfer","source","destination","amount","closeAccount","push","target","trim","WithdrawTab","approveDelegate","UpdateFeeTab","feeRate","setFeeRate","updateFee","makeTransaction","refresh","preventDefault","SubmitButton","MintInPoolSelector","label","onChange","style","mintToTickers","width","map","toBase58","MintSelector","options","Object","entries","filter","ticker","includes","toLowerCase"],"mappings":"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","sourcesContent":["import React, { FormEvent, useMemo, useState } from 'react';\nimport { AdminControlledPoolInstructions, PoolInfo } from '@project-serum/pool';\nimport { TokenInstructions } from '@project-serum/serum';\nimport FloatingElement from '../../../components/layout/FloatingElement';\nimport { useConnection } from '../../../utils/connection';\nimport { useWallet } from '../../../utils/wallet';\nimport {\n  getSelectedTokenAccountForMint,\n  useTokenAccounts,\n} from '../../../utils/markets';\nimport { sendTransaction } from '../../../utils/send';\nimport { notify } from '../../../utils/notifications';\nimport {\n  Account,\n  PublicKey,\n  SystemProgram,\n  Transaction,\n} from '@solana/web3.js';\nimport { AutoComplete, Button, Input, Select, Tabs } from 'antd';\nimport {\n  createAssociatedTokenAccount,\n  getAssociatedTokenAddress,\n} from '@project-serum/associated-token';\nimport { parseTokenMintData, useMintToTickers } from '../../../utils/tokens';\nimport BN from 'bn.js';\nimport { refreshAllCaches } from '../../../utils/fetch-loop';\n\nconst { TabPane } = Tabs;\nconst { Option } = Select;\n\nexport function PoolAdminPanel({ poolInfo }: { poolInfo: PoolInfo }) {\n  return (\n    <FloatingElement>\n      <Tabs>\n        <TabPane tab=\"Pause/Unpause\" key=\"pause\">\n          <PauseUnpauseTab poolInfo={poolInfo} />\n        </TabPane>\n        <TabPane tab=\"Add Token\" key=\"addAsset\">\n          <AddAssetTab poolInfo={poolInfo} />\n        </TabPane>\n        <TabPane tab=\"Remove Token\" key=\"removeAsset\">\n          <RemoveAssetTab poolInfo={poolInfo} />\n        </TabPane>\n        <TabPane tab=\"Deposit\" key=\"deposit\">\n          <DepositTab poolInfo={poolInfo} />\n        </TabPane>\n        <TabPane tab=\"Withdraw\" key=\"withdraw\">\n          <WithdrawTab poolInfo={poolInfo} />\n        </TabPane>\n        <TabPane tab=\"Modify Fee\" key=\"updateFee\">\n          <UpdateFeeTab poolInfo={poolInfo} />\n        </TabPane>\n      </Tabs>\n    </FloatingElement>\n  );\n}\n\ninterface TabParams {\n  poolInfo: PoolInfo;\n}\n\nfunction PauseUnpauseTab({ poolInfo }: TabParams) {\n  const connection = useConnection();\n  const { wallet, connected } = useWallet();\n  const [submitting, setSubmitting] = useState(false);\n\n  async function sendPause() {\n    if (!connected || !wallet) {\n      return;\n    }\n    setSubmitting(true);\n    try {\n      const transaction = new Transaction();\n      transaction.add(AdminControlledPoolInstructions.pause(poolInfo));\n      await sendTransaction({ connection, wallet, transaction });\n    } catch (e) {\n      notify({\n        message: 'Error pausing pool',\n        description: e.message,\n        type: 'error',\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  async function sendUnpause() {\n    if (!connected || !wallet) {\n      return;\n    }\n    setSubmitting(true);\n    try {\n      const transaction = new Transaction();\n      transaction.add(AdminControlledPoolInstructions.unpause(poolInfo));\n      await sendTransaction({ connection, wallet, transaction });\n    } catch (e) {\n      notify({\n        message: 'Error unpausing pool',\n        description: e.message,\n        type: 'error',\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return (\n    <>\n      <Button onClick={sendPause} disabled={submitting}>\n        Pause\n      </Button>{' '}\n      <Button onClick={sendUnpause} disabled={submitting}>\n        Unpause\n      </Button>\n    </>\n  );\n}\n\nfunction AddAssetTab({ poolInfo }: TabParams) {\n  const connection = useConnection();\n  const [address, setAddress] = useState('');\n  const { wallet, connected } = useWallet();\n  const canSubmit = connected && address;\n  const [onSubmit, submitting] = useOnSubmitHandler(\n    'adding asset to pool',\n    async () => {\n      const mintAddress = new PublicKey(address);\n      const vaultAddress = await getAssociatedTokenAddress(\n        poolInfo.state.vaultSigner,\n        mintAddress,\n      );\n      const transaction = new Transaction();\n      if (!(await connection.getAccountInfo(vaultAddress)) && wallet) {\n        transaction.add(\n          await createAssociatedTokenAccount(\n            wallet.publicKey,\n            poolInfo.state.vaultSigner,\n            mintAddress,\n          ),\n        );\n      }\n      transaction.add(\n        AdminControlledPoolInstructions.addAsset(poolInfo, vaultAddress),\n      );\n      return [transaction, []];\n    },\n  );\n\n  return (\n    <form onSubmit={onSubmit}>\n      <MintSelector\n        label=\"Token Mint Address\"\n        value={address}\n        onChange={(value) => setAddress(value)}\n        style={{ marginBottom: 24 }}\n      />\n      <SubmitButton canSubmit={canSubmit} submitting={submitting} />\n    </form>\n  );\n}\n\nfunction RemoveAssetTab({ poolInfo }: TabParams) {\n  const [address, setAddress] = useState('');\n  const { connected } = useWallet();\n  const canSubmit = connected && address;\n  const [onSubmit, submitting] = useOnSubmitHandler(\n    'removing asset from pool',\n    async () => {\n      const mintAddress = new PublicKey(address);\n      const vaultAddress = poolInfo.state.assets.find((asset) =>\n        asset.mint.equals(mintAddress),\n      )?.vaultAddress;\n      if (!vaultAddress) {\n        throw new Error('Asset not in pool');\n      }\n      const transaction = new Transaction();\n      transaction.add(\n        AdminControlledPoolInstructions.removeAsset(poolInfo, vaultAddress),\n      );\n      return [transaction, []];\n    },\n  );\n\n  return (\n    <form onSubmit={onSubmit}>\n      <MintInPoolSelector\n        poolInfo={poolInfo}\n        label=\"Token Mint Address\"\n        value={address}\n        onChange={(value) => setAddress(value)}\n        style={{ marginBottom: 24 }}\n      />\n      <SubmitButton canSubmit={canSubmit} submitting={submitting} />\n    </form>\n  );\n}\n\nfunction DepositTab({ poolInfo }: TabParams) {\n  const [address, setAddress] = useState('');\n  const [quantity, setQuantity] = useState('');\n\n  const connection = useConnection();\n  const { wallet, connected } = useWallet();\n  const [tokenAccounts] = useTokenAccounts();\n  const canSubmit =\n    connected && address && tokenAccounts && parseFloat(quantity);\n\n  const [onSubmit, submitting] = useOnSubmitHandler(\n    'depositing to pool',\n    async () => {\n      if (!wallet) {\n        throw new Error('Wallet is not connected');\n      }\n\n      const mintAddress = new PublicKey(address);\n      const vaultAddress = poolInfo.state.assets.find((asset) =>\n        asset.mint.equals(mintAddress),\n      )?.vaultAddress;\n      if (!vaultAddress) {\n        throw new Error('Asset not in pool');\n      }\n\n      const walletTokenAccount = getSelectedTokenAccountForMint(\n        tokenAccounts,\n        mintAddress,\n      );\n      if (!walletTokenAccount) {\n        throw new Error('Asset not in wallet');\n      }\n\n      const mintAccountInfo = await connection.getAccountInfo(mintAddress);\n      if (!mintAccountInfo) {\n        throw new Error('Mint not found');\n      }\n      const mintDecimals = parseTokenMintData(mintAccountInfo.data).decimals;\n      const parsedQuantity = Math.round(\n        parseFloat(quantity) * 10 ** mintDecimals,\n      );\n\n      const wrappedSolAccount =\n        mintAddress.equals(TokenInstructions.WRAPPED_SOL_MINT) &&\n        walletTokenAccount.pubkey.equals(wallet.publicKey)\n          ? new Account()\n          : null;\n\n      const transaction = new Transaction();\n      const signers: Account[] = [];\n      if (wrappedSolAccount) {\n        transaction.add(\n          SystemProgram.createAccount({\n            fromPubkey: wallet.publicKey,\n            lamports: parsedQuantity + 2.04e6,\n            newAccountPubkey: wrappedSolAccount.publicKey,\n            programId: TokenInstructions.TOKEN_PROGRAM_ID,\n            space: 165,\n          }),\n          TokenInstructions.initializeAccount({\n            account: wrappedSolAccount.publicKey,\n            mint: TokenInstructions.WRAPPED_SOL_MINT,\n            owner: wallet.publicKey,\n          }),\n          TokenInstructions.transfer({\n            source: wrappedSolAccount.publicKey,\n            destination: vaultAddress,\n            amount: parsedQuantity,\n            owner: wallet.publicKey,\n          }),\n          TokenInstructions.closeAccount({\n            source: wrappedSolAccount.publicKey,\n            destination: walletTokenAccount.pubkey,\n            owner: wallet.publicKey,\n          }),\n        );\n        signers.push(wrappedSolAccount);\n      } else {\n        transaction.add(\n          TokenInstructions.transfer({\n            source: walletTokenAccount.pubkey,\n            destination: vaultAddress,\n            amount: parsedQuantity,\n            owner: wallet.publicKey,\n          }),\n        );\n      }\n      return [transaction, signers];\n    },\n    true,\n  );\n\n  return (\n    <form onSubmit={onSubmit}>\n      <MintInPoolSelector\n        poolInfo={poolInfo}\n        label=\"Token Mint Address\"\n        value={address}\n        onChange={(value) => setAddress(value)}\n        style={{ marginBottom: 24 }}\n      />\n      <Input\n        addonBefore={<>Quantity</>}\n        value={quantity}\n        onChange={(e) => setQuantity(e.target.value.trim())}\n        style={{ marginBottom: 24 }}\n      />\n      <SubmitButton canSubmit={canSubmit} submitting={submitting} />\n    </form>\n  );\n}\n\nfunction WithdrawTab({ poolInfo }: TabParams) {\n  const [address, setAddress] = useState('');\n  const [quantity, setQuantity] = useState('');\n\n  const connection = useConnection();\n  const { wallet, connected } = useWallet();\n  const [tokenAccounts] = useTokenAccounts();\n  const canSubmit =\n    connected && address && tokenAccounts && parseFloat(quantity);\n\n  const [onSubmit, submitting] = useOnSubmitHandler(\n    'withdrawing from pool',\n    async () => {\n      if (!wallet) {\n        throw new Error('Wallet is not connected');\n      }\n\n      const mintAddress = new PublicKey(address);\n      const vaultAddress = poolInfo.state.assets.find((asset) =>\n        asset.mint.equals(mintAddress),\n      )?.vaultAddress;\n      if (!vaultAddress) {\n        throw new Error('Asset not in pool');\n      }\n\n      const walletTokenAccount = getSelectedTokenAccountForMint(\n        tokenAccounts,\n        mintAddress,\n      );\n      if (!walletTokenAccount) {\n        throw new Error('Asset not in wallet');\n      }\n\n      const mintAccountInfo = await connection.getAccountInfo(mintAddress);\n      if (!mintAccountInfo) {\n        throw new Error('Mint not found');\n      }\n      const mintDecimals = parseTokenMintData(mintAccountInfo.data).decimals;\n      const parsedQuantity = Math.round(\n        parseFloat(quantity) * 10 ** mintDecimals,\n      );\n\n      const wrappedSolAccount =\n        mintAddress.equals(TokenInstructions.WRAPPED_SOL_MINT) &&\n        walletTokenAccount.pubkey.equals(wallet.publicKey)\n          ? new Account()\n          : null;\n\n      const transaction = new Transaction();\n      const signers: Account[] = [];\n      if (wrappedSolAccount) {\n        transaction.add(\n          SystemProgram.createAccount({\n            fromPubkey: wallet.publicKey,\n            lamports: 2.04e6,\n            newAccountPubkey: wrappedSolAccount.publicKey,\n            programId: TokenInstructions.TOKEN_PROGRAM_ID,\n            space: 165,\n          }),\n          TokenInstructions.initializeAccount({\n            account: wrappedSolAccount.publicKey,\n            mint: TokenInstructions.WRAPPED_SOL_MINT,\n            owner: wallet.publicKey,\n          }),\n        );\n        signers.push(wrappedSolAccount);\n      }\n      transaction.add(\n        AdminControlledPoolInstructions.approveDelegate(\n          poolInfo,\n          vaultAddress,\n          wallet.publicKey,\n          new BN(parsedQuantity),\n        ),\n      );\n      if (wrappedSolAccount) {\n        transaction.add(\n          TokenInstructions.transfer({\n            source: vaultAddress,\n            destination: wrappedSolAccount.publicKey,\n            amount: parsedQuantity,\n            owner: wallet.publicKey,\n          }),\n          TokenInstructions.closeAccount({\n            source: wrappedSolAccount.publicKey,\n            destination: walletTokenAccount.pubkey,\n            owner: wallet.publicKey,\n          }),\n        );\n      } else {\n        transaction.add(\n          TokenInstructions.transfer({\n            source: vaultAddress,\n            destination: walletTokenAccount.pubkey,\n            amount: parsedQuantity,\n            owner: wallet.publicKey,\n          }),\n        );\n      }\n      return [transaction, signers];\n    },\n  );\n\n  return (\n    <form onSubmit={onSubmit}>\n      <MintInPoolSelector\n        poolInfo={poolInfo}\n        label=\"Token Mint Address\"\n        value={address}\n        onChange={(value) => setAddress(value)}\n        style={{ marginBottom: 24 }}\n      />\n      <Input\n        addonBefore={<>Quantity</>}\n        value={quantity}\n        onChange={(e) => setQuantity(e.target.value.trim())}\n        style={{ marginBottom: 24 }}\n      />\n      <SubmitButton canSubmit={canSubmit} submitting={submitting} />\n    </form>\n  );\n}\n\nfunction UpdateFeeTab({ poolInfo }: TabParams) {\n  const [feeRate, setFeeRate] = useState('');\n\n  const { connected } = useWallet();\n  const [tokenAccounts] = useTokenAccounts();\n  const canSubmit = connected && tokenAccounts && parseFloat(feeRate);\n\n  const [onSubmit, submitting] = useOnSubmitHandler(\n    'changing pool fee',\n    async () => {\n      const transaction = new Transaction();\n      transaction.add(\n        AdminControlledPoolInstructions.updateFee(\n          poolInfo,\n          Math.round(parseFloat(feeRate) * 1_000_000),\n        ),\n      );\n      return [transaction, []];\n    },\n  );\n\n  return (\n    <form onSubmit={onSubmit}>\n      <Input\n        addonBefore={<>Fee Rate</>}\n        value={feeRate}\n        onChange={(e) => setFeeRate(e.target.value.trim())}\n        style={{ marginBottom: 24 }}\n      />\n      <SubmitButton canSubmit={canSubmit} submitting={submitting} />\n    </form>\n  );\n}\n\nfunction useOnSubmitHandler(\n  description: string,\n  makeTransaction: () => Promise<[Transaction, Account[]]>,\n  refresh = false,\n): [(FormEvent) => void, boolean] {\n  const connection = useConnection();\n  const { wallet, connected } = useWallet();\n  const [submitting, setSubmitting] = useState(false);\n\n  async function onSubmit(e: FormEvent) {\n    e.preventDefault();\n    if (submitting) {\n      return;\n    }\n    setSubmitting(true);\n    try {\n      if (!connected || !wallet) {\n        throw new Error('Wallet not connected');\n      }\n      const [transaction, signers] = await makeTransaction();\n      await sendTransaction({ connection, wallet, transaction, signers });\n      if (refresh) {\n        refreshAllCaches();\n      }\n    } catch (e) {\n      notify({\n        message: `Error ${description}`,\n        description: e.message,\n        type: 'error',\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  }\n\n  return [onSubmit, submitting];\n}\n\nfunction SubmitButton({ canSubmit, submitting }) {\n  const { connected } = useWallet();\n  return (\n    <Button\n      htmlType=\"submit\"\n      type=\"primary\"\n      disabled={!canSubmit || submitting}\n    >\n      {!connected ? 'Wallet not connected' : 'Submit'}\n    </Button>\n  );\n}\n\nfunction MintInPoolSelector({\n  poolInfo,\n  label,\n  value,\n  onChange,\n  style,\n}: {\n  poolInfo: PoolInfo;\n  label: string;\n  value: string;\n  onChange: (string) => void;\n  style: any;\n}) {\n  const mintToTickers = useMintToTickers();\n  return (\n    <Input.Group style={style}>\n      <span className=\"ant-input-group-addon\">{label}</span>\n      <Select onChange={onChange} value={value} style={{ width: '100%' }}>\n        {poolInfo.state.assets.map((asset) => (\n          <Option value={asset.mint.toBase58()} key={asset.mint.toBase58()}>\n            {mintToTickers[asset.mint.toBase58()] ? (\n              <>\n                {mintToTickers[asset.mint.toBase58()]} ({asset.mint.toBase58()})\n              </>\n            ) : (\n              asset.mint.toBase58()\n            )}\n          </Option>\n        ))}\n      </Select>\n    </Input.Group>\n  );\n}\n\nfunction MintSelector({ label, style, value, onChange }) {\n  const mintToTickers = useMintToTickers();\n  const options = useMemo(() => {\n    return Object.entries(mintToTickers)\n      .filter(\n        ([mintAddress, ticker]) =>\n          mintAddress.includes(value) ||\n          ticker.toLowerCase().includes(value.toLowerCase()),\n      )\n      .map(([mintAddress, ticker]) => ({\n        value: mintAddress,\n        label: (\n          <>\n            {ticker} ({mintAddress})\n          </>\n        ),\n      }));\n  }, [mintToTickers, value]);\n  return (\n    <Input.Group style={style}>\n      <span className=\"ant-input-group-addon\">{label}</span>\n      <AutoComplete\n        options={options}\n        value={value}\n        onChange={(e) => onChange(e)}\n        style={{ width: '100%' }}\n      />\n    </Input.Group>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}