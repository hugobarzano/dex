{"ast":null,"code":"import _toConsumableArray from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import{InfoCircleOutlined,PlusCircleOutlined,SettingOutlined}from'@ant-design/icons';import{Button,Col,Menu,Popover,Row,Select}from'antd';import React,{useCallback,useEffect,useState}from'react';import{useHistory,useLocation}from'react-router-dom';import logo from\"../assets/logo.svg\";import styled from'styled-components';import{useWallet}from'../utils/wallet';import{ENDPOINTS,useConnectionConfig}from'../utils/connection';import Settings from'./Settings';import CustomClusterEndpointDialog from'./CustomClusterEndpointDialog';import{notify}from'../utils/notifications';import{Connection}from'@solana/web3.js';import WalletConnect from'./WalletConnect';import AppSearch from'./AppSearch';import{getTradePageUrl}from'../utils/markets';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  background-color: #0d1017;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-end;\\n  padding: 0px 30px;\\n  flex-wrap: wrap;\\n\"])));var LogoWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  color: #2abdd2;\\n  font-weight: bold;\\n  cursor: pointer;\\n  img {\\n    height: 30px;\\n    margin-right: 8px;\\n  }\\n\"])));var EXTERNAL_LINKS={'/learn':'https://docs.projectserum.com/trade-on-serum-dex/trade-on-serum-dex-1','/add-market':'https://serum-academy.com/en/add-market/','/wallet-support':'https://serum-academy.com/en/wallet-support','/dex-list':'https://serum-academy.com/en/dex-list/','/developer-resources':'https://serum-academy.com/en/developer-resources/','/explorer':'https://solscan.io','/srm-faq':'https://projectserum.com/srm-faq','/swap':'https://swap.projectserum.com'};export default function TopBar(){var _useWallet=useWallet(),connected=_useWallet.connected,wallet=_useWallet.wallet;var _useConnectionConfig=useConnectionConfig(),endpoint=_useConnectionConfig.endpoint,endpointInfo=_useConnectionConfig.endpointInfo,setEndpoint=_useConnectionConfig.setEndpoint,availableEndpoints=_useConnectionConfig.availableEndpoints,setCustomEndpoints=_useConnectionConfig.setCustomEndpoints;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addEndpointVisible=_useState2[0],setAddEndpointVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),testingConnection=_useState4[0],setTestingConnection=_useState4[1];var location=useLocation();var history=useHistory();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),searchFocussed=_useState6[0],setSearchFocussed=_useState6[1];var handleClick=useCallback(function(e){if(!(e.key in EXTERNAL_LINKS)){history.push(e.key);}},[history]);var onAddCustomEndpoint=function onAddCustomEndpoint(info){var existingEndpoint=availableEndpoints.some(function(e){return e.endpoint===info.endpoint;});if(existingEndpoint){notify({message:\"An endpoint with the given url already exists\",type:'error'});return;}var handleError=function handleError(e){console.log(\"Connection to \".concat(info.endpoint,\" failed: \").concat(e));notify({message:\"Failed to connect to \".concat(info.endpoint),type:'error'});};try{var connection=new Connection(info.endpoint,'recent');connection.getBlockTime(0).then(function(){setTestingConnection(true);console.log(\"testing connection to \".concat(info.endpoint));var newCustomEndpoints=[].concat(_toConsumableArray(availableEndpoints.filter(function(e){return e.custom;})),[info]);setEndpoint(info.endpoint);setCustomEndpoints(newCustomEndpoints);}).catch(handleError);}catch(e){handleError(e);}finally{setTestingConnection(false);}};var endpointInfoCustom=endpointInfo&&endpointInfo.custom;useEffect(function(){var handler=function handler(){if(endpointInfoCustom){setEndpoint(ENDPOINTS[0].endpoint);}};window.addEventListener('beforeunload',handler);return function(){return window.removeEventListener('beforeunload',handler);};},[endpointInfoCustom,setEndpoint]);var tradePageUrl=location.pathname.startsWith('/market/')?location.pathname:getTradePageUrl();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CustomClusterEndpointDialog,{visible:addEndpointVisible,testingConnection:testingConnection,onAddCustomEndpoint:onAddCustomEndpoint,onClose:function onClose(){return setAddEndpointVisible(false);}}),/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(LogoWrapper,{onClick:function onClick(){return history.push(tradePageUrl);},children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\"}),'SERUM']}),/*#__PURE__*/_jsxs(Menu,{mode:\"horizontal\",onClick:handleClick,selectedKeys:[location.pathname],style:{borderBottom:'none',backgroundColor:'transparent',display:'flex',alignItems:'flex-end',flex:1},children:[/*#__PURE__*/_jsx(Menu.Item,{style:{margin:'0 10px 0 20px'},children:\"TRADE\"},tradePageUrl),!searchFocussed&&/*#__PURE__*/_jsx(Menu.Item,{style:{margin:'0 10px'},children:/*#__PURE__*/_jsx(\"a\",{href:EXTERNAL_LINKS['/swap'],target:\"_blank\",rel:\"noopener noreferrer\",children:\"SWAP\"})},\"/swap\"),connected&&(!searchFocussed||location.pathname==='/balances')&&/*#__PURE__*/_jsx(Menu.Item,{style:{margin:'0 10px'},children:\"BALANCES\"},\"/balances\"),connected&&(!searchFocussed||location.pathname==='/orders')&&/*#__PURE__*/_jsx(Menu.Item,{style:{margin:'0 10px'},children:\"ORDERS\"},\"/orders\"),connected&&(!searchFocussed||location.pathname==='/convert')&&/*#__PURE__*/_jsx(Menu.Item,{style:{margin:'0 10px'},children:\"CONVERT\"},\"/convert\"),(!searchFocussed||location.pathname==='/list-new-market')&&/*#__PURE__*/_jsx(Menu.Item,{style:{margin:'0 10px'},children:\"ADD MARKET\"},\"/list-new-market\"),!searchFocussed&&/*#__PURE__*/_jsxs(Menu.SubMenu,{title:\"LEARN\",onTitleClick:function onTitleClick(){return window.open(EXTERNAL_LINKS['/learn'],'_blank');},style:{margin:'0 0px 0 10px'},children:[/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(\"a\",{href:EXTERNAL_LINKS['/add-market'],target:\"_blank\",rel:\"noopener noreferrer\",children:\"Adding a market\"})},\"/add-market\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(\"a\",{href:EXTERNAL_LINKS['/wallet-support'],target:\"_blank\",rel:\"noopener noreferrer\",children:\"Supported wallets\"})},\"/wallet-support\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(\"a\",{href:EXTERNAL_LINKS['/dex-list'],target:\"_blank\",rel:\"noopener noreferrer\",children:\"DEX list\"})},\"/dex-list\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(\"a\",{href:EXTERNAL_LINKS['/developer-resources'],target:\"_blank\",rel:\"noopener noreferrer\",children:\"Developer resources\"})},\"/developer-resources\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(\"a\",{href:EXTERNAL_LINKS['/explorer'],target:\"_blank\",rel:\"noopener noreferrer\",children:\"Solana block explorer\"})},\"/explorer\"),/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(\"a\",{href:EXTERNAL_LINKS['/srm-faq'],target:\"_blank\",rel:\"noopener noreferrer\",children:\"SRM FAQ\"})},\"/srm-faq\")]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',paddingRight:5},children:/*#__PURE__*/_jsx(AppSearch,{onFocus:function onFocus(){return setSearchFocussed(true);},onBlur:function onBlur(){return setSearchFocussed(false);},focussed:searchFocussed,width:searchFocussed?'350px':'35px'})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{align:\"middle\",style:{paddingLeft:5,paddingRight:5},gutter:16,children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(PlusCircleOutlined,{style:{color:'#2abdd2'},onClick:function onClick(){return setAddEndpointVisible(true);}})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Popover,{content:endpoint,placement:\"bottomRight\",title:\"URL\",trigger:\"hover\",children:/*#__PURE__*/_jsx(InfoCircleOutlined,{style:{color:'#2abdd2'}})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Select,{onSelect:setEndpoint,value:endpoint,style:{marginRight:8,width:'150px'},children:availableEndpoints.map(function(_ref){var name=_ref.name,endpoint=_ref.endpoint;return/*#__PURE__*/_jsx(Select.Option,{value:endpoint,children:name},endpoint);})})})]})}),connected&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Popover,{content:/*#__PURE__*/_jsx(Settings,{autoApprove:wallet===null||wallet===void 0?void 0:wallet.autoApprove}),placement:\"bottomRight\",title:\"Settings\",trigger:\"click\",children:/*#__PURE__*/_jsxs(Button,{style:{marginRight:8},children:[/*#__PURE__*/_jsx(SettingOutlined,{}),\"Settings\"]})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(WalletConnect,{})})]})]});}","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/src/components/TopBar.tsx"],"names":["InfoCircleOutlined","PlusCircleOutlined","SettingOutlined","Button","Col","Menu","Popover","Row","Select","React","useCallback","useEffect","useState","useHistory","useLocation","styled","useWallet","ENDPOINTS","useConnectionConfig","Settings","CustomClusterEndpointDialog","notify","Connection","WalletConnect","AppSearch","getTradePageUrl","Wrapper","div","LogoWrapper","EXTERNAL_LINKS","TopBar","connected","wallet","endpoint","endpointInfo","setEndpoint","availableEndpoints","setCustomEndpoints","addEndpointVisible","setAddEndpointVisible","testingConnection","setTestingConnection","location","history","searchFocussed","setSearchFocussed","handleClick","e","key","push","onAddCustomEndpoint","info","existingEndpoint","some","message","type","handleError","console","log","connection","getBlockTime","then","newCustomEndpoints","filter","custom","catch","endpointInfoCustom","handler","window","addEventListener","removeEventListener","tradePageUrl","pathname","startsWith","logo","borderBottom","backgroundColor","display","alignItems","flex","margin","open","paddingRight","paddingLeft","color","marginRight","width","map","name","autoApprove"],"mappings":"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","sourcesContent":["import {\n  InfoCircleOutlined,\n  PlusCircleOutlined,\n  SettingOutlined,\n} from '@ant-design/icons';\nimport { Button, Col, Menu, Popover, Row, Select } from 'antd';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport logo from '../assets/logo.svg';\nimport styled from 'styled-components';\nimport { useWallet } from '../utils/wallet';\nimport { ENDPOINTS, useConnectionConfig } from '../utils/connection';\nimport Settings from './Settings';\nimport CustomClusterEndpointDialog from './CustomClusterEndpointDialog';\nimport { EndpointInfo } from '../utils/types';\nimport { notify } from '../utils/notifications';\nimport { Connection } from '@solana/web3.js';\nimport WalletConnect from './WalletConnect';\nimport AppSearch from './AppSearch';\nimport { getTradePageUrl } from '../utils/markets';\n\nconst Wrapper = styled.div`\n  background-color: #0d1017;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  padding: 0px 30px;\n  flex-wrap: wrap;\n`;\nconst LogoWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  color: #2abdd2;\n  font-weight: bold;\n  cursor: pointer;\n  img {\n    height: 30px;\n    margin-right: 8px;\n  }\n`;\n\nconst EXTERNAL_LINKS = {\n  '/learn': 'https://docs.projectserum.com/trade-on-serum-dex/trade-on-serum-dex-1',\n  '/add-market': 'https://serum-academy.com/en/add-market/',\n  '/wallet-support': 'https://serum-academy.com/en/wallet-support',\n  '/dex-list': 'https://serum-academy.com/en/dex-list/',\n  '/developer-resources': 'https://serum-academy.com/en/developer-resources/',\n  '/explorer': 'https://solscan.io',\n  '/srm-faq': 'https://projectserum.com/srm-faq',\n  '/swap': 'https://swap.projectserum.com',\n};\n\nexport default function TopBar() {\n  const { connected, wallet } = useWallet();\n  const {\n    endpoint,\n    endpointInfo,\n    setEndpoint,\n    availableEndpoints,\n    setCustomEndpoints,\n  } = useConnectionConfig();\n  const [addEndpointVisible, setAddEndpointVisible] = useState(false);\n  const [testingConnection, setTestingConnection] = useState(false);\n  const location = useLocation();\n  const history = useHistory();\n  const [searchFocussed, setSearchFocussed] = useState(false);\n\n  const handleClick = useCallback(\n    (e) => {\n      if (!(e.key in EXTERNAL_LINKS)) {\n        history.push(e.key);\n      }\n    },\n    [history],\n  );\n\n  const onAddCustomEndpoint = (info: EndpointInfo) => {\n    const existingEndpoint = availableEndpoints.some(\n      (e) => e.endpoint === info.endpoint,\n    );\n    if (existingEndpoint) {\n      notify({\n        message: `An endpoint with the given url already exists`,\n        type: 'error',\n      });\n      return;\n    }\n\n    const handleError = (e) => {\n      console.log(`Connection to ${info.endpoint} failed: ${e}`);\n      notify({\n        message: `Failed to connect to ${info.endpoint}`,\n        type: 'error',\n      });\n    };\n\n    try {\n      const connection = new Connection(info.endpoint, 'recent');\n      connection\n        .getBlockTime(0)\n        .then(() => {\n          setTestingConnection(true);\n          console.log(`testing connection to ${info.endpoint}`);\n          const newCustomEndpoints = [\n            ...availableEndpoints.filter((e) => e.custom),\n            info,\n          ];\n          setEndpoint(info.endpoint);\n          setCustomEndpoints(newCustomEndpoints);\n        })\n        .catch(handleError);\n    } catch (e) {\n      handleError(e);\n    } finally {\n      setTestingConnection(false);\n    }\n  };\n\n  const endpointInfoCustom = endpointInfo && endpointInfo.custom;\n  useEffect(() => {\n    const handler = () => {\n      if (endpointInfoCustom) {\n        setEndpoint(ENDPOINTS[0].endpoint);\n      }\n    };\n    window.addEventListener('beforeunload', handler);\n    return () => window.removeEventListener('beforeunload', handler);\n  }, [endpointInfoCustom, setEndpoint]);\n\n  const tradePageUrl = location.pathname.startsWith('/market/')\n    ? location.pathname\n    : getTradePageUrl();\n\n  return (\n    <>\n      <CustomClusterEndpointDialog\n        visible={addEndpointVisible}\n        testingConnection={testingConnection}\n        onAddCustomEndpoint={onAddCustomEndpoint}\n        onClose={() => setAddEndpointVisible(false)}\n      />\n      <Wrapper>\n        <LogoWrapper onClick={() => history.push(tradePageUrl)}>\n          <img src={logo} alt=\"\" />\n          {'SERUM'}\n        </LogoWrapper>\n        <Menu\n          mode=\"horizontal\"\n          onClick={handleClick}\n          selectedKeys={[location.pathname]}\n          style={{\n            borderBottom: 'none',\n            backgroundColor: 'transparent',\n            display: 'flex',\n            alignItems: 'flex-end',\n            flex: 1,\n          }}\n        >\n          <Menu.Item key={tradePageUrl} style={{ margin: '0 10px 0 20px' }}>\n            TRADE\n          </Menu.Item>\n          {!searchFocussed && (\n            <Menu.Item key=\"/swap\" style={{ margin: '0 10px' }}>\n              <a\n                href={EXTERNAL_LINKS['/swap']}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                SWAP\n              </a>\n            </Menu.Item>\n          )}\n          {connected && (!searchFocussed || location.pathname === '/balances') && (\n            <Menu.Item key=\"/balances\" style={{ margin: '0 10px' }}>\n              BALANCES\n            </Menu.Item>\n          )}\n          {connected && (!searchFocussed || location.pathname === '/orders') && (\n            <Menu.Item key=\"/orders\" style={{ margin: '0 10px' }}>\n              ORDERS\n            </Menu.Item>\n          )}\n          {connected && (!searchFocussed || location.pathname === '/convert') && (\n            <Menu.Item key=\"/convert\" style={{ margin: '0 10px' }}>\n              CONVERT\n            </Menu.Item>\n          )}\n          {(!searchFocussed || location.pathname === '/list-new-market') && (\n            <Menu.Item key=\"/list-new-market\" style={{ margin: '0 10px' }}>\n              ADD MARKET\n            </Menu.Item>\n          )}\n          {!searchFocussed && (\n            <Menu.SubMenu\n              title=\"LEARN\"\n              onTitleClick={() =>\n                window.open(EXTERNAL_LINKS['/learn'], '_blank')\n              }\n              style={{ margin: '0 0px 0 10px' }}\n            >\n              <Menu.Item key=\"/add-market\">\n                <a\n                  href={EXTERNAL_LINKS['/add-market']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Adding a market\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/wallet-support\">\n                <a\n                  href={EXTERNAL_LINKS['/wallet-support']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Supported wallets\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/dex-list\">\n                <a\n                  href={EXTERNAL_LINKS['/dex-list']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  DEX list\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/developer-resources\">\n                <a\n                  href={EXTERNAL_LINKS['/developer-resources']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Developer resources\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/explorer\">\n                <a\n                  href={EXTERNAL_LINKS['/explorer']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Solana block explorer\n                </a>\n              </Menu.Item>\n              <Menu.Item key=\"/srm-faq\">\n                <a\n                  href={EXTERNAL_LINKS['/srm-faq']}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  SRM FAQ\n                </a>\n              </Menu.Item>\n            </Menu.SubMenu>\n          )}\n        </Menu>\n        <div\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            paddingRight: 5,\n          }}\n        >\n          <AppSearch\n            onFocus={() => setSearchFocussed(true)}\n            onBlur={() => setSearchFocussed(false)}\n            focussed={searchFocussed}\n            width={searchFocussed ? '350px' : '35px'}\n          />\n        </div>\n        <div>\n          <Row\n            align=\"middle\"\n            style={{ paddingLeft: 5, paddingRight: 5 }}\n            gutter={16}\n          >\n            <Col>\n              <PlusCircleOutlined\n                style={{ color: '#2abdd2' }}\n                onClick={() => setAddEndpointVisible(true)}\n              />\n            </Col>\n            <Col>\n              <Popover\n                content={endpoint}\n                placement=\"bottomRight\"\n                title=\"URL\"\n                trigger=\"hover\"\n              >\n                <InfoCircleOutlined style={{ color: '#2abdd2' }} />\n              </Popover>\n            </Col>\n            <Col>\n              <Select\n                onSelect={setEndpoint}\n                value={endpoint}\n                style={{ marginRight: 8, width: '150px' }}\n              >\n                {availableEndpoints.map(({ name, endpoint }) => (\n                  <Select.Option value={endpoint} key={endpoint}>\n                    {name}\n                  </Select.Option>\n                ))}\n              </Select>\n            </Col>\n          </Row>\n        </div>\n        {connected && (\n          <div>\n            <Popover\n              content={<Settings autoApprove={wallet?.autoApprove} />}\n              placement=\"bottomRight\"\n              title=\"Settings\"\n              trigger=\"click\"\n            >\n              <Button style={{ marginRight: 8 }}>\n                <SettingOutlined />\n                Settings\n              </Button>\n            </Popover>\n          </div>\n        )}\n        <div>\n          <WalletConnect />\n        </div>\n      </Wrapper>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}