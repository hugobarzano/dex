{"ast":null,"code":"import _slicedToArray from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Col,Input,Modal,Row,Typography}from'antd';import{notify}from'../utils/notifications';import{isValidPublicKey}from'../utils/utils';import{PublicKey}from'@solana/web3.js';import{Market,MARKETS,TOKEN_MINTS}from'@project-serum/serum';import{useAccountInfo,useConnection}from'../utils/connection';import{LoadingOutlined}from'@ant-design/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Text=Typography.Text;export default function CustomMarketDialog(_ref){var _TOKEN_MINTS$find,_TOKEN_MINTS$find2;var visible=_ref.visible,onAddCustomMarket=_ref.onAddCustomMarket,onClose=_ref.onClose;var connection=useConnection();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),marketId=_useState2[0],setMarketId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),marketLabel=_useState4[0],setMarketLabel=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),baseLabel=_useState6[0],setBaseLabel=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),quoteLabel=_useState8[0],setQuoteLabel=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),market=_useState10[0],setMarket=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loadingMarket=_useState12[0],setLoadingMarket=_useState12[1];var wellFormedMarketId=isValidPublicKey(marketId);var _useAccountInfo=useAccountInfo(wellFormedMarketId?new PublicKey(marketId):null),_useAccountInfo2=_slicedToArray(_useAccountInfo,1),marketAccountInfo=_useAccountInfo2[0];var programId=marketAccountInfo?marketAccountInfo.owner.toBase58():MARKETS.find(function(_ref2){var deprecated=_ref2.deprecated;return!deprecated;}).programId.toBase58();useEffect(function(){if(!wellFormedMarketId||!programId){resetLabels();return;}setLoadingMarket(true);Market.load(connection,new PublicKey(marketId),{},new PublicKey(programId)).then(function(market){setMarket(market);}).catch(function(){resetLabels();setMarket(null);}).finally(function(){return setLoadingMarket(false);});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[connection,marketId,programId]);var resetLabels=function resetLabels(){setMarketLabel(null);setBaseLabel(null);setQuoteLabel(null);};var knownMarket=MARKETS.find(function(m){return m.address.toBase58()===marketId&&m.programId.toBase58()===programId;});var knownProgram=MARKETS.find(function(m){return m.programId.toBase58()===programId;});var knownBaseCurrency=(market===null||market===void 0?void 0:market.baseMintAddress)&&((_TOKEN_MINTS$find=TOKEN_MINTS.find(function(token){return token.address.equals(market.baseMintAddress);}))===null||_TOKEN_MINTS$find===void 0?void 0:_TOKEN_MINTS$find.name);var knownQuoteCurrency=(market===null||market===void 0?void 0:market.quoteMintAddress)&&((_TOKEN_MINTS$find2=TOKEN_MINTS.find(function(token){return token.address.equals(market.quoteMintAddress);}))===null||_TOKEN_MINTS$find2===void 0?void 0:_TOKEN_MINTS$find2.name);var canSubmit=!loadingMarket&&!!market&&market.publicKey.toBase58()===marketId&&marketId&&programId&&marketLabel&&(knownBaseCurrency||baseLabel)&&(knownQuoteCurrency||quoteLabel)&&wellFormedMarketId;var onSubmit=function onSubmit(){if(!canSubmit){notify({message:'Please fill in all fields with valid values',type:'error'});return;}var params={address:marketId,programId:programId,name:marketLabel};if(!knownBaseCurrency){params.baseLabel=baseLabel;}if(!knownQuoteCurrency){params.quoteLabel=quoteLabel;}onAddCustomMarket(params);onDoClose();};var onDoClose=function onDoClose(){resetLabels();setMarket(null);setMarketId(null);onClose();};return/*#__PURE__*/_jsx(Modal,{title:'Add custom market',visible:visible,onOk:onSubmit,okText:'Add',onCancel:onDoClose,okButtonProps:{disabled:!canSubmit},children:/*#__PURE__*/_jsxs(\"div\",{children:[wellFormedMarketId?/*#__PURE__*/_jsxs(_Fragment,{children:[!market&&!loadingMarket&&/*#__PURE__*/_jsx(Row,{style:{marginBottom:8},children:/*#__PURE__*/_jsx(Text,{type:\"danger\",children:\"Not a valid market\"})}),market&&knownMarket&&/*#__PURE__*/_jsx(Row,{style:{marginBottom:8},children:/*#__PURE__*/_jsxs(Text,{type:\"warning\",children:[\"Market known: \",knownMarket.name]})}),market&&!knownProgram&&/*#__PURE__*/_jsx(Row,{style:{marginBottom:8},children:/*#__PURE__*/_jsx(Text,{type:\"danger\",children:\"Warning: unknown DEX program\"})}),market&&knownProgram&&knownProgram.deprecated&&/*#__PURE__*/_jsx(Row,{style:{marginBottom:8},children:/*#__PURE__*/_jsx(Text,{type:\"warning\",children:\"Warning: deprecated DEX program\"})})]}):/*#__PURE__*/_jsx(_Fragment,{children:marketId&&!wellFormedMarketId&&/*#__PURE__*/_jsx(Row,{style:{marginBottom:8},children:/*#__PURE__*/_jsx(Text,{type:\"danger\",children:\"Invalid market ID\"})})}),/*#__PURE__*/_jsx(Row,{style:{marginBottom:8},children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Input,{placeholder:\"Market Id\",value:marketId,onChange:function onChange(e){return setMarketId(e.target.value);},suffix:loadingMarket?/*#__PURE__*/_jsx(LoadingOutlined,{}):null})})}),/*#__PURE__*/_jsx(Row,{style:{marginBottom:8,marginTop:8},children:/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Input,{placeholder:\"Market Label\",disabled:!market,value:marketLabel,onChange:function onChange(e){return setMarketLabel(e.target.value);}})})}),/*#__PURE__*/_jsxs(Row,{gutter:[8],style:{marginBottom:8},children:[/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Base label\",disabled:!market||knownBaseCurrency,value:knownBaseCurrency||baseLabel,onChange:function onChange(e){return setBaseLabel(e.target.value);}}),market&&!knownBaseCurrency&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(Text,{type:\"warning\",children:\"Warning: unknown token\"})})]}),/*#__PURE__*/_jsxs(Col,{span:12,children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Quote label\",disabled:!market||knownQuoteCurrency,value:knownQuoteCurrency||quoteLabel,onChange:function onChange(e){return setQuoteLabel(e.target.value);}}),market&&!knownQuoteCurrency&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(Text,{type:\"warning\",children:\"Warning: unknown token\"})})]})]})]})});}","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/src/components/CustomMarketDialog.jsx"],"names":["React","useEffect","useState","Col","Input","Modal","Row","Typography","notify","isValidPublicKey","PublicKey","Market","MARKETS","TOKEN_MINTS","useAccountInfo","useConnection","LoadingOutlined","Text","CustomMarketDialog","visible","onAddCustomMarket","onClose","connection","marketId","setMarketId","marketLabel","setMarketLabel","baseLabel","setBaseLabel","quoteLabel","setQuoteLabel","market","setMarket","loadingMarket","setLoadingMarket","wellFormedMarketId","marketAccountInfo","programId","owner","toBase58","find","deprecated","resetLabels","load","then","catch","finally","knownMarket","m","address","knownProgram","knownBaseCurrency","baseMintAddress","token","equals","name","knownQuoteCurrency","quoteMintAddress","canSubmit","publicKey","onSubmit","message","type","params","onDoClose","disabled","marginBottom","e","target","value","marginTop"],"mappings":"yLAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,GAAT,CAAcC,KAAd,CAAqBC,KAArB,CAA4BC,GAA5B,CAAiCC,UAAjC,KAAmD,MAAnD,CACA,OAASC,MAAT,KAAuB,wBAAvB,CACA,OAASC,gBAAT,KAAiC,gBAAjC,CACA,OAASC,SAAT,KAA0B,iBAA1B,CACA,OAASC,MAAT,CAAiBC,OAAjB,CAA0BC,WAA1B,KAA6C,sBAA7C,CACA,OAASC,cAAT,CAAyBC,aAAzB,KAA8C,qBAA9C,CACA,OAASC,eAAT,KAAgC,mBAAhC,C,6IAEA,GAAQC,CAAAA,IAAR,CAAiBV,UAAjB,CAAQU,IAAR,CAEA,cAAe,SAASC,CAAAA,kBAAT,MAIZ,6CAHDC,CAAAA,OAGC,MAHDA,OAGC,CAFDC,iBAEC,MAFDA,iBAEC,CADDC,OACC,MADDA,OACC,CACD,GAAMC,CAAAA,UAAU,CAAGP,aAAa,EAAhC,CAEA,cAAgCb,QAAQ,CAAC,EAAD,CAAxC,wCAAOqB,QAAP,eAAiBC,WAAjB,eAEA,eAAsCtB,QAAQ,CAAC,EAAD,CAA9C,yCAAOuB,WAAP,eAAoBC,cAApB,eACA,eAAkCxB,QAAQ,CAAC,EAAD,CAA1C,yCAAOyB,SAAP,eAAkBC,YAAlB,eACA,eAAoC1B,QAAQ,CAAC,EAAD,CAA5C,yCAAO2B,UAAP,eAAmBC,aAAnB,eAEA,eAA4B5B,QAAQ,CAAC,IAAD,CAApC,0CAAO6B,MAAP,gBAAeC,SAAf,gBACA,gBAA0C9B,QAAQ,CAAC,KAAD,CAAlD,2CAAO+B,aAAP,gBAAsBC,gBAAtB,gBAEA,GAAMC,CAAAA,kBAAkB,CAAG1B,gBAAgB,CAACc,QAAD,CAA3C,CAEA,oBAA4BT,cAAc,CACxCqB,kBAAkB,CAAG,GAAIzB,CAAAA,SAAJ,CAAca,QAAd,CAAH,CAA6B,IADP,CAA1C,oDAAOa,iBAAP,qBAGA,GAAMC,CAAAA,SAAS,CAAGD,iBAAiB,CAC/BA,iBAAiB,CAACE,KAAlB,CAAwBC,QAAxB,EAD+B,CAE/B3B,OAAO,CAAC4B,IAAR,CAAa,mBAAGC,CAAAA,UAAH,OAAGA,UAAH,OAAoB,CAACA,UAArB,EAAb,EAA8CJ,SAA9C,CAAwDE,QAAxD,EAFJ,CAIAtC,SAAS,CAAC,UAAM,CACd,GAAI,CAACkC,kBAAD,EAAuB,CAACE,SAA5B,CAAuC,CACrCK,WAAW,GACX,OACD,CACDR,gBAAgB,CAAC,IAAD,CAAhB,CACAvB,MAAM,CAACgC,IAAP,CACErB,UADF,CAEE,GAAIZ,CAAAA,SAAJ,CAAca,QAAd,CAFF,CAGE,EAHF,CAIE,GAAIb,CAAAA,SAAJ,CAAc2B,SAAd,CAJF,EAMGO,IANH,CAMQ,SAACb,MAAD,CAAY,CAChBC,SAAS,CAACD,MAAD,CAAT,CACD,CARH,EASGc,KATH,CASS,UAAM,CACXH,WAAW,GACXV,SAAS,CAAC,IAAD,CAAT,CACD,CAZH,EAaGc,OAbH,CAaW,iBAAMZ,CAAAA,gBAAgB,CAAC,KAAD,CAAtB,EAbX,EAcA;AACD,CArBQ,CAqBN,CAACZ,UAAD,CAAaC,QAAb,CAAuBc,SAAvB,CArBM,CAAT,CAuBA,GAAMK,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBhB,cAAc,CAAC,IAAD,CAAd,CACAE,YAAY,CAAC,IAAD,CAAZ,CACAE,aAAa,CAAC,IAAD,CAAb,CACD,CAJD,CAMA,GAAMiB,CAAAA,WAAW,CAAGnC,OAAO,CAAC4B,IAAR,CAClB,SAACQ,CAAD,QACEA,CAAAA,CAAC,CAACC,OAAF,CAAUV,QAAV,KAAyBhB,QAAzB,EAAqCyB,CAAC,CAACX,SAAF,CAAYE,QAAZ,KAA2BF,SADlE,EADkB,CAApB,CAIA,GAAMa,CAAAA,YAAY,CAAGtC,OAAO,CAAC4B,IAAR,CACnB,SAACQ,CAAD,QAAOA,CAAAA,CAAC,CAACX,SAAF,CAAYE,QAAZ,KAA2BF,SAAlC,EADmB,CAArB,CAGA,GAAMc,CAAAA,iBAAiB,CACrB,CAAApB,MAAM,OAAN,EAAAA,MAAM,SAAN,QAAAA,MAAM,CAAEqB,eAAR,uBACAvC,WAAW,CAAC2B,IAAZ,CAAiB,SAACa,KAAD,QAAWA,CAAAA,KAAK,CAACJ,OAAN,CAAcK,MAAd,CAAqBvB,MAAM,CAACqB,eAA5B,CAAX,EAAjB,CADA,4CACA,kBACIG,IAFJ,CADF,CAKA,GAAMC,CAAAA,kBAAkB,CACtB,CAAAzB,MAAM,OAAN,EAAAA,MAAM,SAAN,QAAAA,MAAM,CAAE0B,gBAAR,wBACA5C,WAAW,CAAC2B,IAAZ,CAAiB,SAACa,KAAD,QAAWA,CAAAA,KAAK,CAACJ,OAAN,CAAcK,MAAd,CAAqBvB,MAAM,CAAC0B,gBAA5B,CAAX,EAAjB,CADA,6CACA,mBACIF,IAFJ,CADF,CAKA,GAAMG,CAAAA,SAAS,CACb,CAACzB,aAAD,EACA,CAAC,CAACF,MADF,EAEAA,MAAM,CAAC4B,SAAP,CAAiBpB,QAAjB,KAAgChB,QAFhC,EAGAA,QAHA,EAIAc,SAJA,EAKAZ,WALA,GAMC0B,iBAAiB,EAAIxB,SANtB,IAOC6B,kBAAkB,EAAI3B,UAPvB,GAQAM,kBATF,CAWA,GAAMyB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAI,CAACF,SAAL,CAAgB,CACdlD,MAAM,CAAC,CACLqD,OAAO,CAAE,6CADJ,CAELC,IAAI,CAAE,OAFD,CAAD,CAAN,CAIA,OACD,CAED,GAAIC,CAAAA,MAAM,CAAG,CACXd,OAAO,CAAE1B,QADE,CAEXc,SAAS,CAATA,SAFW,CAGXkB,IAAI,CAAE9B,WAHK,CAAb,CAKA,GAAI,CAAC0B,iBAAL,CAAwB,CACtBY,MAAM,CAACpC,SAAP,CAAmBA,SAAnB,CACD,CACD,GAAI,CAAC6B,kBAAL,CAAyB,CACvBO,MAAM,CAAClC,UAAP,CAAoBA,UAApB,CACD,CACDT,iBAAiB,CAAC2C,MAAD,CAAjB,CACAC,SAAS,GACV,CAtBD,CAwBA,GAAMA,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtBtB,WAAW,GACXV,SAAS,CAAC,IAAD,CAAT,CACAR,WAAW,CAAC,IAAD,CAAX,CACAH,OAAO,GACR,CALD,CAOA,mBACE,KAAC,KAAD,EACE,KAAK,CAAE,mBADT,CAEE,OAAO,CAAEF,OAFX,CAGE,IAAI,CAAEyC,QAHR,CAIE,MAAM,CAAE,KAJV,CAKE,QAAQ,CAAEI,SALZ,CAME,aAAa,CAAE,CAAEC,QAAQ,CAAE,CAACP,SAAb,CANjB,uBAQE,uBACGvB,kBAAkB,cACjB,2BACG,CAACJ,MAAD,EAAW,CAACE,aAAZ,eACC,KAAC,GAAD,EAAK,KAAK,CAAE,CAAEiC,YAAY,CAAE,CAAhB,CAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAC,QAAX,gCADF,EAFJ,CAMGnC,MAAM,EAAIgB,WAAV,eACC,KAAC,GAAD,EAAK,KAAK,CAAE,CAAEmB,YAAY,CAAE,CAAhB,CAAZ,uBACE,MAAC,IAAD,EAAM,IAAI,CAAC,SAAX,4BAAoCnB,WAAW,CAACQ,IAAhD,GADF,EAPJ,CAWGxB,MAAM,EAAI,CAACmB,YAAX,eACC,KAAC,GAAD,EAAK,KAAK,CAAE,CAAEgB,YAAY,CAAE,CAAhB,CAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAC,QAAX,0CADF,EAZJ,CAgBGnC,MAAM,EAAImB,YAAV,EAA0BA,YAAY,CAACT,UAAvC,eACC,KAAC,GAAD,EAAK,KAAK,CAAE,CAAEyB,YAAY,CAAE,CAAhB,CAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAC,SAAX,6CADF,EAjBJ,GADiB,cAwBjB,yBACG3C,QAAQ,EAAI,CAACY,kBAAb,eACC,KAAC,GAAD,EAAK,KAAK,CAAE,CAAE+B,YAAY,CAAE,CAAhB,CAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAC,QAAX,+BADF,EAFJ,EAzBJ,cAiCE,KAAC,GAAD,EAAK,KAAK,CAAE,CAAEA,YAAY,CAAE,CAAhB,CAAZ,uBACE,KAAC,GAAD,EAAK,IAAI,CAAE,EAAX,uBACE,KAAC,KAAD,EACE,WAAW,CAAC,WADd,CAEE,KAAK,CAAE3C,QAFT,CAGE,QAAQ,CAAE,kBAAC4C,CAAD,QAAO3C,CAAAA,WAAW,CAAC2C,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAHZ,CAIE,MAAM,CAAEpC,aAAa,cAAG,KAAC,eAAD,IAAH,CAAyB,IAJhD,EADF,EADF,EAjCF,cA4CE,KAAC,GAAD,EAAK,KAAK,CAAE,CAAEiC,YAAY,CAAE,CAAhB,CAAmBI,SAAS,CAAE,CAA9B,CAAZ,uBACE,KAAC,GAAD,EAAK,IAAI,CAAE,EAAX,uBACE,KAAC,KAAD,EACE,WAAW,CAAC,cADd,CAEE,QAAQ,CAAE,CAACvC,MAFb,CAGE,KAAK,CAAEN,WAHT,CAIE,QAAQ,CAAE,kBAAC0C,CAAD,QAAOzC,CAAAA,cAAc,CAACyC,CAAC,CAACC,MAAF,CAASC,KAAV,CAArB,EAJZ,EADF,EADF,EA5CF,cAsDE,MAAC,GAAD,EAAK,MAAM,CAAE,CAAC,CAAD,CAAb,CAAkB,KAAK,CAAE,CAAEH,YAAY,CAAE,CAAhB,CAAzB,wBACE,MAAC,GAAD,EAAK,IAAI,CAAE,EAAX,wBACE,KAAC,KAAD,EACE,WAAW,CAAC,YADd,CAEE,QAAQ,CAAE,CAACnC,MAAD,EAAWoB,iBAFvB,CAGE,KAAK,CAAEA,iBAAiB,EAAIxB,SAH9B,CAIE,QAAQ,CAAE,kBAACwC,CAAD,QAAOvC,CAAAA,YAAY,CAACuC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAnB,EAJZ,EADF,CAOGtC,MAAM,EAAI,CAACoB,iBAAX,eACC,YAAK,KAAK,CAAE,CAAEmB,SAAS,CAAE,CAAb,CAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAC,SAAX,oCADF,EARJ,GADF,cAcE,MAAC,GAAD,EAAK,IAAI,CAAE,EAAX,wBACE,KAAC,KAAD,EACE,WAAW,CAAC,aADd,CAEE,QAAQ,CAAE,CAACvC,MAAD,EAAWyB,kBAFvB,CAGE,KAAK,CAAEA,kBAAkB,EAAI3B,UAH/B,CAIE,QAAQ,CAAE,kBAACsC,CAAD,QAAOrC,CAAAA,aAAa,CAACqC,CAAC,CAACC,MAAF,CAASC,KAAV,CAApB,EAJZ,EADF,CAOGtC,MAAM,EAAI,CAACyB,kBAAX,eACC,YAAK,KAAK,CAAE,CAAEc,SAAS,CAAE,CAAb,CAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAC,SAAX,oCADF,EARJ,GAdF,GAtDF,GARF,EADF,CA8FD","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Col, Input, Modal, Row, Typography } from 'antd';\nimport { notify } from '../utils/notifications';\nimport { isValidPublicKey } from '../utils/utils';\nimport { PublicKey } from '@solana/web3.js';\nimport { Market, MARKETS, TOKEN_MINTS } from '@project-serum/serum';\nimport { useAccountInfo, useConnection } from '../utils/connection';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nconst { Text } = Typography;\n\nexport default function CustomMarketDialog({\n  visible,\n  onAddCustomMarket,\n  onClose,\n}) {\n  const connection = useConnection();\n\n  const [marketId, setMarketId] = useState('');\n\n  const [marketLabel, setMarketLabel] = useState('');\n  const [baseLabel, setBaseLabel] = useState('');\n  const [quoteLabel, setQuoteLabel] = useState('');\n\n  const [market, setMarket] = useState(null);\n  const [loadingMarket, setLoadingMarket] = useState(false);\n\n  const wellFormedMarketId = isValidPublicKey(marketId);\n\n  const [marketAccountInfo] = useAccountInfo(\n    wellFormedMarketId ? new PublicKey(marketId) : null,\n  );\n  const programId = marketAccountInfo\n    ? marketAccountInfo.owner.toBase58()\n    : MARKETS.find(({ deprecated }) => !deprecated).programId.toBase58();\n\n  useEffect(() => {\n    if (!wellFormedMarketId || !programId) {\n      resetLabels();\n      return;\n    }\n    setLoadingMarket(true);\n    Market.load(\n      connection,\n      new PublicKey(marketId),\n      {},\n      new PublicKey(programId),\n    )\n      .then((market) => {\n        setMarket(market);\n      })\n      .catch(() => {\n        resetLabels();\n        setMarket(null);\n      })\n      .finally(() => setLoadingMarket(false));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [connection, marketId, programId]);\n\n  const resetLabels = () => {\n    setMarketLabel(null);\n    setBaseLabel(null);\n    setQuoteLabel(null);\n  };\n\n  const knownMarket = MARKETS.find(\n    (m) =>\n      m.address.toBase58() === marketId && m.programId.toBase58() === programId,\n  );\n  const knownProgram = MARKETS.find(\n    (m) => m.programId.toBase58() === programId,\n  );\n  const knownBaseCurrency =\n    market?.baseMintAddress &&\n    TOKEN_MINTS.find((token) => token.address.equals(market.baseMintAddress))\n      ?.name;\n\n  const knownQuoteCurrency =\n    market?.quoteMintAddress &&\n    TOKEN_MINTS.find((token) => token.address.equals(market.quoteMintAddress))\n      ?.name;\n\n  const canSubmit =\n    !loadingMarket &&\n    !!market &&\n    market.publicKey.toBase58() === marketId &&\n    marketId &&\n    programId &&\n    marketLabel &&\n    (knownBaseCurrency || baseLabel) &&\n    (knownQuoteCurrency || quoteLabel) &&\n    wellFormedMarketId;\n\n  const onSubmit = () => {\n    if (!canSubmit) {\n      notify({\n        message: 'Please fill in all fields with valid values',\n        type: 'error',\n      });\n      return;\n    }\n\n    let params = {\n      address: marketId,\n      programId,\n      name: marketLabel,\n    };\n    if (!knownBaseCurrency) {\n      params.baseLabel = baseLabel;\n    }\n    if (!knownQuoteCurrency) {\n      params.quoteLabel = quoteLabel;\n    }\n    onAddCustomMarket(params);\n    onDoClose();\n  };\n\n  const onDoClose = () => {\n    resetLabels();\n    setMarket(null);\n    setMarketId(null);\n    onClose();\n  };\n\n  return (\n    <Modal\n      title={'Add custom market'}\n      visible={visible}\n      onOk={onSubmit}\n      okText={'Add'}\n      onCancel={onDoClose}\n      okButtonProps={{ disabled: !canSubmit }}\n    >\n      <div>\n        {wellFormedMarketId ? (\n          <>\n            {!market && !loadingMarket && (\n              <Row style={{ marginBottom: 8 }}>\n                <Text type=\"danger\">Not a valid market</Text>\n              </Row>\n            )}\n            {market && knownMarket && (\n              <Row style={{ marginBottom: 8 }}>\n                <Text type=\"warning\">Market known: {knownMarket.name}</Text>\n              </Row>\n            )}\n            {market && !knownProgram && (\n              <Row style={{ marginBottom: 8 }}>\n                <Text type=\"danger\">Warning: unknown DEX program</Text>\n              </Row>\n            )}\n            {market && knownProgram && knownProgram.deprecated && (\n              <Row style={{ marginBottom: 8 }}>\n                <Text type=\"warning\">Warning: deprecated DEX program</Text>\n              </Row>\n            )}\n          </>\n        ) : (\n          <>\n            {marketId && !wellFormedMarketId && (\n              <Row style={{ marginBottom: 8 }}>\n                <Text type=\"danger\">Invalid market ID</Text>\n              </Row>\n            )}\n          </>\n        )}\n        <Row style={{ marginBottom: 8 }}>\n          <Col span={24}>\n            <Input\n              placeholder=\"Market Id\"\n              value={marketId}\n              onChange={(e) => setMarketId(e.target.value)}\n              suffix={loadingMarket ? <LoadingOutlined /> : null}\n            />\n          </Col>\n        </Row>\n\n        <Row style={{ marginBottom: 8, marginTop: 8 }}>\n          <Col span={24}>\n            <Input\n              placeholder=\"Market Label\"\n              disabled={!market}\n              value={marketLabel}\n              onChange={(e) => setMarketLabel(e.target.value)}\n            />\n          </Col>\n        </Row>\n        <Row gutter={[8]} style={{ marginBottom: 8 }}>\n          <Col span={12}>\n            <Input\n              placeholder=\"Base label\"\n              disabled={!market || knownBaseCurrency}\n              value={knownBaseCurrency || baseLabel}\n              onChange={(e) => setBaseLabel(e.target.value)}\n            />\n            {market && !knownBaseCurrency && (\n              <div style={{ marginTop: 8 }}>\n                <Text type=\"warning\">Warning: unknown token</Text>\n              </div>\n            )}\n          </Col>\n          <Col span={12}>\n            <Input\n              placeholder=\"Quote label\"\n              disabled={!market || knownQuoteCurrency}\n              value={knownQuoteCurrency || quoteLabel}\n              onChange={(e) => setQuoteLabel(e.target.value)}\n            />\n            {market && !knownQuoteCurrency && (\n              <div style={{ marginTop: 8 }}>\n                <Text type=\"warning\">Warning: unknown token</Text>\n              </div>\n            )}\n          </Col>\n        </Row>\n      </div>\n    </Modal>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}