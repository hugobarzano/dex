{"ast":null,"code":"import _toConsumableArray from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useAccountInfo}from'../../../utils/connection';import{parseTokenAccountData,parseTokenMintData}from'../../../utils/tokens';import{Button,Spin,Tabs}from'antd';import FloatingElement from'../../../components/layout/FloatingElement';import{useTokenAccounts}from'../../../utils/markets';import{MintName}from'../../../components/MintName';import{LinkOutlined}from'@ant-design/icons';import{WRAPPED_SOL_MINT}from'@project-serum/serum/lib/token-instructions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TabPane=Tabs.TabPane;export default function PoolBalancesPanel(_ref){var poolInfo=_ref.poolInfo;return/*#__PURE__*/_jsx(FloatingElement,{children:/*#__PURE__*/_jsxs(Tabs,{children:[/*#__PURE__*/_jsx(TabPane,{tab:\"Wallet Balances\",children:/*#__PURE__*/_jsx(WalletBalancesTab,{poolInfo:poolInfo})},\"wallet\"),/*#__PURE__*/_jsx(TabPane,{tab:\"Pool Balances\",children:/*#__PURE__*/_jsx(PoolBalancesTab,{poolInfo:poolInfo})},\"pool\")]})});}function WalletBalancesTab(_ref2){var poolInfo=_ref2.poolInfo;var _useTokenAccounts=useTokenAccounts(),_useTokenAccounts2=_slicedToArray(_useTokenAccounts,1),tokenAccounts=_useTokenAccounts2[0];return/*#__PURE__*/_jsx(\"ul\",{children:[poolInfo.state.poolTokenMint].concat(_toConsumableArray(poolInfo.state.assets.map(function(asset){return asset.mint;}))).map(function(mint,index){var tokenAccount=tokenAccounts===null||tokenAccounts===void 0?void 0:tokenAccounts.find(function(account){return account.effectiveMint.equals(mint);});if(!tokenAccount){return null;}return/*#__PURE__*/_jsx(BalanceItem,{mint:mint,publicKey:tokenAccount.pubkey,isPoolToken:mint.equals(poolInfo.state.poolTokenMint)},index);})});}function PoolBalancesTab(_ref3){var poolInfo=_ref3.poolInfo;return/*#__PURE__*/_jsx(\"ul\",{children:poolInfo.state.assets.map(function(asset,index){return/*#__PURE__*/_jsx(BalanceItem,{mint:asset.mint,publicKey:asset.vaultAddress},index);})});}function BalanceItem(_ref4){var mint=_ref4.mint,publicKey=_ref4.publicKey,isPoolToken=_ref4.isPoolToken;var _useAccountInfo=useAccountInfo(mint),_useAccountInfo2=_slicedToArray(_useAccountInfo,1),mintAccountInfo=_useAccountInfo2[0];var _useAccountInfo3=useAccountInfo(publicKey),_useAccountInfo4=_slicedToArray(_useAccountInfo3,1),balanceAccountInfo=_useAccountInfo4[0];var quantityDisplay=/*#__PURE__*/_jsx(Spin,{size:\"small\"});if(mintAccountInfo&&balanceAccountInfo){var mintInfo=parseTokenMintData(mintAccountInfo.data);if(mint.equals(WRAPPED_SOL_MINT)){quantityDisplay=/*#__PURE__*/_jsx(_Fragment,{children:balanceAccountInfo.lamports/Math.pow(10,mintInfo.decimals)});}else{var accountInfo=parseTokenAccountData(balanceAccountInfo.data);quantityDisplay=/*#__PURE__*/_jsx(_Fragment,{children:accountInfo.amount/Math.pow(10,mintInfo.decimals)});}}return/*#__PURE__*/_jsxs(\"li\",{children:[quantityDisplay,' ',isPoolToken?/*#__PURE__*/_jsxs(_Fragment,{children:[\"Pool Token (\",/*#__PURE__*/_jsx(MintName,{mint:mint}),\")\"]}):/*#__PURE__*/_jsx(MintName,{mint:mint}),' ',/*#__PURE__*/_jsx(Button,{type:\"link\",icon:/*#__PURE__*/_jsx(LinkOutlined,{}),href:'https://solscan.io/address/'+publicKey.toBase58(),target:\"_blank\",rel:\"noopener noreferrer\"})]});}","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/src/pages/pools/PoolPage/PoolBalancesPanel.tsx"],"names":["React","useAccountInfo","parseTokenAccountData","parseTokenMintData","Button","Spin","Tabs","FloatingElement","useTokenAccounts","MintName","LinkOutlined","WRAPPED_SOL_MINT","TabPane","PoolBalancesPanel","poolInfo","WalletBalancesTab","tokenAccounts","state","poolTokenMint","assets","map","asset","mint","index","tokenAccount","find","account","effectiveMint","equals","pubkey","PoolBalancesTab","vaultAddress","BalanceItem","publicKey","isPoolToken","mintAccountInfo","balanceAccountInfo","quantityDisplay","mintInfo","data","lamports","decimals","accountInfo","amount","toBase58"],"mappings":"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","sourcesContent":["import { PoolInfo } from '@project-serum/pool';\nimport React from 'react';\nimport { PublicKey } from '@solana/web3.js';\nimport { useAccountInfo } from '../../../utils/connection';\nimport {\n  parseTokenAccountData,\n  parseTokenMintData,\n} from '../../../utils/tokens';\nimport { Button, Spin, Tabs } from 'antd';\nimport FloatingElement from '../../../components/layout/FloatingElement';\nimport { useTokenAccounts } from '../../../utils/markets';\nimport { MintName } from '../../../components/MintName';\nimport { LinkOutlined } from '@ant-design/icons';\nimport { WRAPPED_SOL_MINT } from '@project-serum/serum/lib/token-instructions';\n\nconst { TabPane } = Tabs;\n\nexport default function PoolBalancesPanel({\n  poolInfo,\n}: {\n  poolInfo: PoolInfo;\n}) {\n  return (\n    <FloatingElement>\n      <Tabs>\n        <TabPane tab=\"Wallet Balances\" key=\"wallet\">\n          <WalletBalancesTab poolInfo={poolInfo} />\n        </TabPane>\n        <TabPane tab=\"Pool Balances\" key=\"pool\">\n          <PoolBalancesTab poolInfo={poolInfo} />\n        </TabPane>\n      </Tabs>\n    </FloatingElement>\n  );\n}\n\nfunction WalletBalancesTab({ poolInfo }: { poolInfo: PoolInfo }) {\n  const [tokenAccounts] = useTokenAccounts();\n  return (\n    <ul>\n      {[\n        poolInfo.state.poolTokenMint,\n        ...poolInfo.state.assets.map((asset) => asset.mint),\n      ].map((mint, index) => {\n        const tokenAccount = tokenAccounts?.find((account) =>\n          account.effectiveMint.equals(mint),\n        );\n        if (!tokenAccount) {\n          return null;\n        }\n        return (\n          <BalanceItem\n            key={index}\n            mint={mint}\n            publicKey={tokenAccount.pubkey}\n            isPoolToken={mint.equals(poolInfo.state.poolTokenMint)}\n          />\n        );\n      })}\n    </ul>\n  );\n}\n\nfunction PoolBalancesTab({ poolInfo }: { poolInfo: PoolInfo }) {\n  return (\n    <ul>\n      {poolInfo.state.assets.map((asset, index) => {\n        return (\n          <BalanceItem\n            key={index}\n            mint={asset.mint}\n            publicKey={asset.vaultAddress}\n          />\n        );\n      })}\n    </ul>\n  );\n}\n\ninterface BalanceItemProps {\n  mint: PublicKey;\n  publicKey: PublicKey;\n  isPoolToken?: boolean;\n}\n\nfunction BalanceItem({ mint, publicKey, isPoolToken }: BalanceItemProps) {\n  const [mintAccountInfo] = useAccountInfo(mint);\n  const [balanceAccountInfo] = useAccountInfo(publicKey);\n  let quantityDisplay = <Spin size=\"small\" />;\n  if (mintAccountInfo && balanceAccountInfo) {\n    const mintInfo = parseTokenMintData(mintAccountInfo.data);\n    if (mint.equals(WRAPPED_SOL_MINT)) {\n      quantityDisplay = (\n        <>{balanceAccountInfo.lamports / 10 ** mintInfo.decimals}</>\n      );\n    } else {\n      const accountInfo = parseTokenAccountData(balanceAccountInfo.data);\n      quantityDisplay = <>{accountInfo.amount / 10 ** mintInfo.decimals}</>;\n    }\n  }\n\n  return (\n    <li>\n      {quantityDisplay}{' '}\n      {isPoolToken ? (\n        <>\n          Pool Token (<MintName mint={mint} />)\n        </>\n      ) : (\n        <MintName mint={mint} />\n      )}{' '}\n      <Button\n        type=\"link\"\n        icon={<LinkOutlined />}\n        href={'https://solscan.io/address/' + publicKey.toBase58()}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      />\n    </li>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}