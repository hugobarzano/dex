{"ast":null,"code":"import _toConsumableArray from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useCallback,useEffect,useRef,useState}from'react';import{Button,Col,Popover,Row,Select,Typography}from'antd';import styled from'styled-components';import Orderbook from'../components/Orderbook';import UserInfoTable from'../components/UserInfoTable';import StandaloneBalancesDisplay from'../components/StandaloneBalancesDisplay';import{getMarketInfos,getTradePageUrl,MarketProvider,useMarket,useMarketsList,useUnmigratedDeprecatedMarkets}from'../utils/markets';import TradeForm from'../components/TradeForm';import TradesTable from'../components/TradesTable';import LinkAddress from'../components/LinkAddress';import DeprecatedMarketsInstructions from'../components/DeprecatedMarketsInstructions';import{DeleteOutlined,InfoCircleOutlined,PlusCircleOutlined}from'@ant-design/icons';import CustomMarketDialog from'../components/CustomMarketDialog';import{notify}from'../utils/notifications';import{useHistory,useParams}from'react-router-dom';import{nanoid}from'nanoid';import{TVChartContainer}from'../components/TradingView';// Use following stub for quick setup without the TradingView private dependency\n// function TVChartContainer() {\n//   return <></>\n// }\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Option=Select.Option,OptGroup=Select.OptGroup;var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 16px 16px;\\n  .borderNone .ant-select-selector {\\n    border: none !important;\\n  }\\n\"])));export default function TradePage(){var _useParams=useParams(),marketAddress=_useParams.marketAddress;useEffect(function(){if(marketAddress){localStorage.setItem('marketAddress',JSON.stringify(marketAddress));}},[marketAddress]);var history=useHistory();function setMarketAddress(address){history.push(getTradePageUrl(address));}return/*#__PURE__*/_jsx(MarketProvider,{marketAddress:marketAddress,setMarketAddress:setMarketAddress,children:/*#__PURE__*/_jsx(TradePageInner,{})});}function TradePageInner(){var _useMarket=useMarket(),market=_useMarket.market,marketName=_useMarket.marketName,customMarkets=_useMarket.customMarkets,setCustomMarkets=_useMarket.setCustomMarkets,setMarketAddress=_useMarket.setMarketAddress;var markets=useMarketsList();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),handleDeprecated=_useState2[0],setHandleDeprecated=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addMarketVisible=_useState4[0],setAddMarketVisible=_useState4[1];var deprecatedMarkets=useUnmigratedDeprecatedMarkets();var _useState5=useState({height:window.innerHeight,width:window.innerWidth}),_useState6=_slicedToArray(_useState5,2),dimensions=_useState6[0],setDimensions=_useState6[1];useEffect(function(){document.title=marketName?\"\".concat(marketName,\" \\u2014 Serum\"):'Serum';},[marketName]);var changeOrderRef=useRef();useEffect(function(){var handleResize=function handleResize(){setDimensions({height:window.innerHeight,width:window.innerWidth});};window.addEventListener('resize',handleResize);return function(){return window.removeEventListener('resize',handleResize);};},[]);var width=dimensions===null||dimensions===void 0?void 0:dimensions.width;var componentProps={onChangeOrderRef:function onChangeOrderRef(ref){return changeOrderRef.current=ref;},onPrice:useCallback(function(price){return changeOrderRef.current&&changeOrderRef.current({price:price});},[]),onSize:useCallback(function(size){return changeOrderRef.current&&changeOrderRef.current({size:size});},[])};var component=function(){if(handleDeprecated){return/*#__PURE__*/_jsx(DeprecatedMarketsPage,{switchToLiveMarkets:function switchToLiveMarkets(){return setHandleDeprecated(false);}});}else if(width<1000){return/*#__PURE__*/_jsx(RenderSmaller,_objectSpread({},componentProps));}else if(width<1450){return/*#__PURE__*/_jsx(RenderSmall,_objectSpread({},componentProps));}else{return/*#__PURE__*/_jsx(RenderNormal,_objectSpread({},componentProps));}}();var onAddCustomMarket=function onAddCustomMarket(customMarket){var marketInfo=getMarketInfos(customMarkets).some(function(m){return m.address.toBase58()===customMarket.address;});if(marketInfo){notify({message:\"A market with the given ID already exists\",type:'error'});return;}var newCustomMarkets=[].concat(_toConsumableArray(customMarkets),[customMarket]);setCustomMarkets(newCustomMarkets);setMarketAddress(customMarket.address);};var onDeleteCustomMarket=function onDeleteCustomMarket(address){var newCustomMarkets=customMarkets.filter(function(m){return m.address!==address;});setCustomMarkets(newCustomMarkets);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CustomMarketDialog,{visible:addMarketVisible,onClose:function onClose(){return setAddMarketVisible(false);},onAddCustomMarket:onAddCustomMarket}),/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(Row,{align:\"middle\",style:{paddingLeft:5,paddingRight:5},gutter:16,children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(MarketSelector,{markets:markets,setHandleDeprecated:setHandleDeprecated,placeholder:'Select market',customMarkets:customMarkets,onDeleteCustomMarket:onDeleteCustomMarket})}),market?/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Popover,{content:/*#__PURE__*/_jsx(LinkAddress,{address:market.publicKey.toBase58()}),placement:\"bottomRight\",title:\"Market address\",trigger:\"click\",children:/*#__PURE__*/_jsx(InfoCircleOutlined,{style:{color:'#2abdd2'}})})}):null,/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(PlusCircleOutlined,{style:{color:'#2abdd2'},onClick:function onClick(){return setAddMarketVisible(true);}})}),deprecatedMarkets&&deprecatedMarkets.length>0&&/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Typography,{children:\"You have unsettled funds on old markets! Please go through them to claim your funds.\"})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setHandleDeprecated(!handleDeprecated);},children:handleDeprecated?'View new markets':'Handle old markets'})})]})]}),component]})]});}function MarketSelector(_ref){var _getMarketInfos$find,_getMarketInfos$find$;var markets=_ref.markets,placeholder=_ref.placeholder,setHandleDeprecated=_ref.setHandleDeprecated,customMarkets=_ref.customMarkets,onDeleteCustomMarket=_ref.onDeleteCustomMarket;var _useMarket2=useMarket(),market=_useMarket2.market,setMarketAddress=_useMarket2.setMarketAddress;var onSetMarketAddress=function onSetMarketAddress(marketAddress){setHandleDeprecated(false);setMarketAddress(marketAddress);};var extractBase=function extractBase(a){return a.split('/')[0];};var extractQuote=function extractQuote(a){return a.split('/')[1];};var selectedMarket=(_getMarketInfos$find=getMarketInfos(customMarkets).find(function(proposedMarket){return(market===null||market===void 0?void 0:market.address)&&proposedMarket.address.equals(market.address);}))===null||_getMarketInfos$find===void 0?void 0:(_getMarketInfos$find$=_getMarketInfos$find.address)===null||_getMarketInfos$find$===void 0?void 0:_getMarketInfos$find$.toBase58();return/*#__PURE__*/_jsxs(Select,{showSearch:true,size:'large',style:{width:200},placeholder:placeholder||'Select a market',optionFilterProp:\"name\",onSelect:onSetMarketAddress,listHeight:400,value:selectedMarket,filterOption:function filterOption(input,option){var _option$name;return(option===null||option===void 0?void 0:(_option$name=option.name)===null||_option$name===void 0?void 0:_option$name.toLowerCase().indexOf(input.toLowerCase()))>=0;},children:[customMarkets&&customMarkets.length>0&&/*#__PURE__*/_jsx(OptGroup,{label:\"Custom\",children:customMarkets.map(function(_ref2,i){var address=_ref2.address,name=_ref2.name;return/*#__PURE__*/_jsx(Option,{value:address,name:name,style:{padding:'10px',// @ts-ignore\nbackgroundColor:i%2===0?'rgb(39, 44, 61)':null},children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{flex:\"auto\",children:name}),selectedMarket!==address&&/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(DeleteOutlined,{onClick:function onClick(e){e.stopPropagation();e.nativeEvent.stopImmediatePropagation();onDeleteCustomMarket&&onDeleteCustomMarket(address);}})})]})},nanoid());})}),/*#__PURE__*/_jsx(OptGroup,{label:\"Markets\",children:markets.sort(function(a,b){return extractQuote(a.name)==='USDT'&&extractQuote(b.name)!=='USDT'?-1:extractQuote(a.name)!=='USDT'&&extractQuote(b.name)==='USDT'?1:0;}).sort(function(a,b){return extractBase(a.name)<extractBase(b.name)?-1:extractBase(a.name)>extractBase(b.name)?1:0;}).map(function(_ref3,i){var address=_ref3.address,name=_ref3.name,deprecated=_ref3.deprecated;return/*#__PURE__*/_jsxs(Option,{value:address.toBase58(),name:name,style:{padding:'10px',// @ts-ignore\nbackgroundColor:i%2===0?'rgb(39, 44, 61)':null},children:[name,\" \",deprecated?' (Deprecated)':null]},nanoid());})})]});}var DeprecatedMarketsPage=function DeprecatedMarketsPage(_ref4){var switchToLiveMarkets=_ref4.switchToLiveMarkets;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{flex:\"auto\",children:/*#__PURE__*/_jsx(DeprecatedMarketsInstructions,{switchToLiveMarkets:switchToLiveMarkets})})})});};var RenderNormal=function RenderNormal(_ref5){var onChangeOrderRef=_ref5.onChangeOrderRef,onPrice=_ref5.onPrice,onSize=_ref5.onSize;return/*#__PURE__*/_jsxs(Row,{style:{minHeight:'900px',flexWrap:'nowrap'},children:[/*#__PURE__*/_jsxs(Col,{flex:\"auto\",style:{height:'50vh'},children:[/*#__PURE__*/_jsx(Row,{style:{height:'100%'},children:/*#__PURE__*/_jsx(TVChartContainer,{})}),/*#__PURE__*/_jsx(Row,{style:{height:'70%'},children:/*#__PURE__*/_jsx(UserInfoTable,{})})]}),/*#__PURE__*/_jsxs(Col,{flex:'360px',style:{height:'100%'},children:[/*#__PURE__*/_jsx(Orderbook,{smallScreen:false,onPrice:onPrice,onSize:onSize}),/*#__PURE__*/_jsx(TradesTable,{smallScreen:false})]}),/*#__PURE__*/_jsxs(Col,{flex:\"400px\",style:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(TradeForm,{setChangeOrderRef:onChangeOrderRef}),/*#__PURE__*/_jsx(StandaloneBalancesDisplay,{})]})]});};var RenderSmall=function RenderSmall(_ref6){var onChangeOrderRef=_ref6.onChangeOrderRef,onPrice=_ref6.onPrice,onSize=_ref6.onSize;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{style:{height:'30vh'},children:/*#__PURE__*/_jsx(TVChartContainer,{})}),/*#__PURE__*/_jsxs(Row,{style:{height:'900px'},children:[/*#__PURE__*/_jsx(Col,{flex:\"auto\",style:{height:'100%',display:'flex'},children:/*#__PURE__*/_jsx(Orderbook,{smallScreen:true,depth:13,onPrice:onPrice,onSize:onSize})}),/*#__PURE__*/_jsx(Col,{flex:\"auto\",style:{height:'100%',display:'flex'},children:/*#__PURE__*/_jsx(TradesTable,{smallScreen:true})}),/*#__PURE__*/_jsxs(Col,{flex:\"400px\",style:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(TradeForm,{setChangeOrderRef:onChangeOrderRef}),/*#__PURE__*/_jsx(StandaloneBalancesDisplay,{})]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{flex:\"auto\",children:/*#__PURE__*/_jsx(UserInfoTable,{})})})]});};var RenderSmaller=function RenderSmaller(_ref7){var onChangeOrderRef=_ref7.onChangeOrderRef,onPrice=_ref7.onPrice,onSize=_ref7.onSize;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Row,{style:{height:'50vh'},children:/*#__PURE__*/_jsx(TVChartContainer,{})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:12,style:{height:'100%',display:'flex'},children:/*#__PURE__*/_jsx(TradeForm,{style:{flex:1},setChangeOrderRef:onChangeOrderRef})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:12,children:/*#__PURE__*/_jsx(StandaloneBalancesDisplay,{})})]}),/*#__PURE__*/_jsxs(Row,{style:{height:'500px'},children:[/*#__PURE__*/_jsx(Col,{xs:24,sm:12,style:{height:'100%',display:'flex'},children:/*#__PURE__*/_jsx(Orderbook,{smallScreen:true,onPrice:onPrice,onSize:onSize})}),/*#__PURE__*/_jsx(Col,{xs:24,sm:12,style:{height:'100%',display:'flex'},children:/*#__PURE__*/_jsx(TradesTable,{smallScreen:true})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{flex:\"auto\",children:/*#__PURE__*/_jsx(UserInfoTable,{})})})]});};","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/src/pages/TradePage.tsx"],"names":["React","useCallback","useEffect","useRef","useState","Button","Col","Popover","Row","Select","Typography","styled","Orderbook","UserInfoTable","StandaloneBalancesDisplay","getMarketInfos","getTradePageUrl","MarketProvider","useMarket","useMarketsList","useUnmigratedDeprecatedMarkets","TradeForm","TradesTable","LinkAddress","DeprecatedMarketsInstructions","DeleteOutlined","InfoCircleOutlined","PlusCircleOutlined","CustomMarketDialog","notify","useHistory","useParams","nanoid","TVChartContainer","Option","OptGroup","Wrapper","div","TradePage","marketAddress","localStorage","setItem","JSON","stringify","history","setMarketAddress","address","push","TradePageInner","market","marketName","customMarkets","setCustomMarkets","markets","handleDeprecated","setHandleDeprecated","addMarketVisible","setAddMarketVisible","deprecatedMarkets","height","window","innerHeight","width","innerWidth","dimensions","setDimensions","document","title","changeOrderRef","handleResize","addEventListener","removeEventListener","componentProps","onChangeOrderRef","ref","current","onPrice","price","onSize","size","component","onAddCustomMarket","customMarket","marketInfo","some","m","toBase58","message","type","newCustomMarkets","onDeleteCustomMarket","filter","paddingLeft","paddingRight","publicKey","color","length","MarketSelector","placeholder","onSetMarketAddress","extractBase","a","split","extractQuote","selectedMarket","find","proposedMarket","equals","input","option","name","toLowerCase","indexOf","map","i","padding","backgroundColor","e","stopPropagation","nativeEvent","stopImmediatePropagation","sort","b","deprecated","DeprecatedMarketsPage","switchToLiveMarkets","RenderNormal","minHeight","flexWrap","display","flexDirection","RenderSmall","RenderSmaller","flex"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Button, Col, Popover, Row, Select, Typography } from 'antd';\nimport styled from 'styled-components';\nimport Orderbook from '../components/Orderbook';\nimport UserInfoTable from '../components/UserInfoTable';\nimport StandaloneBalancesDisplay from '../components/StandaloneBalancesDisplay';\nimport {\n  getMarketInfos,\n  getTradePageUrl,\n  MarketProvider,\n  useMarket,\n  useMarketsList,\n  useUnmigratedDeprecatedMarkets,\n} from '../utils/markets';\nimport TradeForm from '../components/TradeForm';\nimport TradesTable from '../components/TradesTable';\nimport LinkAddress from '../components/LinkAddress';\nimport DeprecatedMarketsInstructions from '../components/DeprecatedMarketsInstructions';\nimport {\n  DeleteOutlined,\n  InfoCircleOutlined,\n  PlusCircleOutlined,\n} from '@ant-design/icons';\nimport CustomMarketDialog from '../components/CustomMarketDialog';\nimport { notify } from '../utils/notifications';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { nanoid } from 'nanoid';\n\nimport { TVChartContainer } from '../components/TradingView';\n// Use following stub for quick setup without the TradingView private dependency\n// function TVChartContainer() {\n//   return <></>\n// }\n\nconst { Option, OptGroup } = Select;\n\nconst Wrapper = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n`;\n\nexport default function TradePage() {\n  const { marketAddress } = useParams();\n  useEffect(() => {\n    if (marketAddress) {\n      localStorage.setItem('marketAddress', JSON.stringify(marketAddress));\n    }\n  }, [marketAddress]);\n  const history = useHistory();\n  function setMarketAddress(address) {\n    history.push(getTradePageUrl(address));\n  }\n\n  return (\n    <MarketProvider\n      marketAddress={marketAddress}\n      setMarketAddress={setMarketAddress}\n    >\n      <TradePageInner />\n    </MarketProvider>\n  );\n}\n\nfunction TradePageInner() {\n  const {\n    market,\n    marketName,\n    customMarkets,\n    setCustomMarkets,\n    setMarketAddress,\n  } = useMarket();\n  const markets = useMarketsList();\n  const [handleDeprecated, setHandleDeprecated] = useState(false);\n  const [addMarketVisible, setAddMarketVisible] = useState(false);\n  const deprecatedMarkets = useUnmigratedDeprecatedMarkets();\n  const [dimensions, setDimensions] = useState({\n    height: window.innerHeight,\n    width: window.innerWidth,\n  });\n\n  useEffect(() => {\n    document.title = marketName ? `${marketName} — Serum` : 'Serum';\n  }, [marketName]);\n\n  const changeOrderRef = useRef<\n    ({ size, price }: { size?: number; price?: number }) => void\n  >();\n\n  useEffect(() => {\n    const handleResize = () => {\n      setDimensions({\n        height: window.innerHeight,\n        width: window.innerWidth,\n      });\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const width = dimensions?.width;\n  const componentProps = {\n    onChangeOrderRef: (ref) => (changeOrderRef.current = ref),\n    onPrice: useCallback(\n      (price) => changeOrderRef.current && changeOrderRef.current({ price }),\n      [],\n    ),\n    onSize: useCallback(\n      (size) => changeOrderRef.current && changeOrderRef.current({ size }),\n      [],\n    ),\n  };\n  const component = (() => {\n    if (handleDeprecated) {\n      return (\n        <DeprecatedMarketsPage\n          switchToLiveMarkets={() => setHandleDeprecated(false)}\n        />\n      );\n    } else if (width < 1000) {\n      return <RenderSmaller {...componentProps} />;\n    } else if (width < 1450) {\n      return <RenderSmall {...componentProps} />;\n    } else {\n      return <RenderNormal {...componentProps} />;\n    }\n  })();\n\n  const onAddCustomMarket = (customMarket) => {\n    const marketInfo = getMarketInfos(customMarkets).some(\n      (m) => m.address.toBase58() === customMarket.address,\n    );\n    if (marketInfo) {\n      notify({\n        message: `A market with the given ID already exists`,\n        type: 'error',\n      });\n      return;\n    }\n    const newCustomMarkets = [...customMarkets, customMarket];\n    setCustomMarkets(newCustomMarkets);\n    setMarketAddress(customMarket.address);\n  };\n\n  const onDeleteCustomMarket = (address) => {\n    const newCustomMarkets = customMarkets.filter((m) => m.address !== address);\n    setCustomMarkets(newCustomMarkets);\n  };\n\n  return (\n    <>\n      <CustomMarketDialog\n        visible={addMarketVisible}\n        onClose={() => setAddMarketVisible(false)}\n        onAddCustomMarket={onAddCustomMarket}\n      />\n      <Wrapper>\n        <Row\n          align=\"middle\"\n          style={{ paddingLeft: 5, paddingRight: 5 }}\n          gutter={16}\n        >\n          <Col>\n            <MarketSelector\n              markets={markets}\n              setHandleDeprecated={setHandleDeprecated}\n              placeholder={'Select market'}\n              customMarkets={customMarkets}\n              onDeleteCustomMarket={onDeleteCustomMarket}\n            />\n          </Col>\n          {market ? (\n            <Col>\n              <Popover\n                content={<LinkAddress address={market.publicKey.toBase58()} />}\n                placement=\"bottomRight\"\n                title=\"Market address\"\n                trigger=\"click\"\n              >\n                <InfoCircleOutlined style={{ color: '#2abdd2' }} />\n              </Popover>\n            </Col>\n          ) : null}\n          <Col>\n            <PlusCircleOutlined\n              style={{ color: '#2abdd2' }}\n              onClick={() => setAddMarketVisible(true)}\n            />\n          </Col>\n          {deprecatedMarkets && deprecatedMarkets.length > 0 && (\n            <React.Fragment>\n              <Col>\n                <Typography>\n                  You have unsettled funds on old markets! Please go through\n                  them to claim your funds.\n                </Typography>\n              </Col>\n              <Col>\n                <Button onClick={() => setHandleDeprecated(!handleDeprecated)}>\n                  {handleDeprecated ? 'View new markets' : 'Handle old markets'}\n                </Button>\n              </Col>\n            </React.Fragment>\n          )}\n        </Row>\n        {component}\n      </Wrapper>\n    </>\n  );\n}\n\nfunction MarketSelector({\n  markets,\n  placeholder,\n  setHandleDeprecated,\n  customMarkets,\n  onDeleteCustomMarket,\n}) {\n  const { market, setMarketAddress } = useMarket();\n\n  const onSetMarketAddress = (marketAddress) => {\n    setHandleDeprecated(false);\n    setMarketAddress(marketAddress);\n  };\n\n  const extractBase = (a) => a.split('/')[0];\n  const extractQuote = (a) => a.split('/')[1];\n\n  const selectedMarket = getMarketInfos(customMarkets)\n    .find(\n      (proposedMarket) =>\n        market?.address && proposedMarket.address.equals(market.address),\n    )\n    ?.address?.toBase58();\n\n  return (\n    <Select\n      showSearch\n      size={'large'}\n      style={{ width: 200 }}\n      placeholder={placeholder || 'Select a market'}\n      optionFilterProp=\"name\"\n      onSelect={onSetMarketAddress}\n      listHeight={400}\n      value={selectedMarket}\n      filterOption={(input, option) =>\n        option?.name?.toLowerCase().indexOf(input.toLowerCase()) >= 0\n      }\n    >\n      {customMarkets && customMarkets.length > 0 && (\n        <OptGroup label=\"Custom\">\n          {customMarkets.map(({ address, name }, i) => (\n            <Option\n              value={address}\n              key={nanoid()}\n              name={name}\n              style={{\n                padding: '10px',\n                // @ts-ignore\n                backgroundColor: i % 2 === 0 ? 'rgb(39, 44, 61)' : null,\n              }}\n            >\n              <Row>\n                <Col flex=\"auto\">{name}</Col>\n                {selectedMarket !== address && (\n                  <Col>\n                    <DeleteOutlined\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        e.nativeEvent.stopImmediatePropagation();\n                        onDeleteCustomMarket && onDeleteCustomMarket(address);\n                      }}\n                    />\n                  </Col>\n                )}\n              </Row>\n            </Option>\n          ))}\n        </OptGroup>\n      )}\n      <OptGroup label=\"Markets\">\n        {markets\n          .sort((a, b) =>\n            extractQuote(a.name) === 'USDT' && extractQuote(b.name) !== 'USDT'\n              ? -1\n              : extractQuote(a.name) !== 'USDT' &&\n                extractQuote(b.name) === 'USDT'\n              ? 1\n              : 0,\n          )\n          .sort((a, b) =>\n            extractBase(a.name) < extractBase(b.name)\n              ? -1\n              : extractBase(a.name) > extractBase(b.name)\n              ? 1\n              : 0,\n          )\n          .map(({ address, name, deprecated }, i) => (\n            <Option\n              value={address.toBase58()}\n              key={nanoid()}\n              name={name}\n              style={{\n                padding: '10px',\n                // @ts-ignore\n                backgroundColor: i % 2 === 0 ? 'rgb(39, 44, 61)' : null,\n              }}\n            >\n              {name} {deprecated ? ' (Deprecated)' : null}\n            </Option>\n          ))}\n      </OptGroup>\n    </Select>\n  );\n}\n\nconst DeprecatedMarketsPage = ({ switchToLiveMarkets }) => {\n  return (\n    <>\n      <Row>\n        <Col flex=\"auto\">\n          <DeprecatedMarketsInstructions\n            switchToLiveMarkets={switchToLiveMarkets}\n          />\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nconst RenderNormal = ({ onChangeOrderRef, onPrice, onSize }) => {\n  return (\n    <Row\n      style={{\n        minHeight: '900px',\n        flexWrap: 'nowrap',\n      }}\n    >\n      <Col flex=\"auto\" style={{ height: '50vh' }}>\n        <Row style={{ height: '100%' }}>\n          <TVChartContainer />\n        </Row>\n        <Row style={{ height: '70%' }}>\n          <UserInfoTable />\n        </Row>\n      </Col>\n      <Col flex={'360px'} style={{ height: '100%' }}>\n        <Orderbook smallScreen={false} onPrice={onPrice} onSize={onSize} />\n        <TradesTable smallScreen={false} />\n      </Col>\n      <Col\n        flex=\"400px\"\n        style={{ height: '100%', display: 'flex', flexDirection: 'column' }}\n      >\n        <TradeForm setChangeOrderRef={onChangeOrderRef} />\n        <StandaloneBalancesDisplay />\n      </Col>\n    </Row>\n  );\n};\n\nconst RenderSmall = ({ onChangeOrderRef, onPrice, onSize }) => {\n  return (\n    <>\n      <Row style={{ height: '30vh' }}>\n        <TVChartContainer />\n      </Row>\n      <Row\n        style={{\n          height: '900px',\n        }}\n      >\n        <Col flex=\"auto\" style={{ height: '100%', display: 'flex' }}>\n          <Orderbook\n            smallScreen={true}\n            depth={13}\n            onPrice={onPrice}\n            onSize={onSize}\n          />\n        </Col>\n        <Col flex=\"auto\" style={{ height: '100%', display: 'flex' }}>\n          <TradesTable smallScreen={true} />\n        </Col>\n        <Col\n          flex=\"400px\"\n          style={{ height: '100%', display: 'flex', flexDirection: 'column' }}\n        >\n          <TradeForm setChangeOrderRef={onChangeOrderRef} />\n          <StandaloneBalancesDisplay />\n        </Col>\n      </Row>\n      <Row>\n        <Col flex=\"auto\">\n          <UserInfoTable />\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nconst RenderSmaller = ({ onChangeOrderRef, onPrice, onSize }) => {\n  return (\n    <>\n      <Row style={{ height: '50vh' }}>\n        <TVChartContainer />\n      </Row>\n      <Row>\n        <Col xs={24} sm={12} style={{ height: '100%', display: 'flex' }}>\n          <TradeForm style={{ flex: 1 }} setChangeOrderRef={onChangeOrderRef} />\n        </Col>\n        <Col xs={24} sm={12}>\n          <StandaloneBalancesDisplay />\n        </Col>\n      </Row>\n      <Row\n        style={{\n          height: '500px',\n        }}\n      >\n        <Col xs={24} sm={12} style={{ height: '100%', display: 'flex' }}>\n          <Orderbook smallScreen={true} onPrice={onPrice} onSize={onSize} />\n        </Col>\n        <Col xs={24} sm={12} style={{ height: '100%', display: 'flex' }}>\n          <TradesTable smallScreen={true} />\n        </Col>\n      </Row>\n      <Row>\n        <Col flex=\"auto\">\n          <UserInfoTable />\n        </Col>\n      </Row>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}