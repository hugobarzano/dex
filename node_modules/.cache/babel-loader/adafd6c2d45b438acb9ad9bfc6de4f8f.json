{"ast":null,"code":"var _jsxFileName = \"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/src/pages/pools/PoolPage/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Col, PageHeader, Row, Spin, Typography } from 'antd';\nimport { PublicKey } from '@solana/web3.js';\nimport { useAccountInfo } from '../../../utils/connection';\nimport FloatingElement from '../../../components/layout/FloatingElement';\nimport { decodePoolState, isAdminControlledPool } from '@project-serum/pool';\nimport PoolInfoPanel from './PoolInfoPanel';\nimport { parseTokenMintData } from '../../../utils/tokens';\nimport PoolCreateRedeemPanel from './PoolCreateRedeemPanel';\nimport PoolBalancesPanel from './PoolBalancesPanel';\nimport { useHistory } from 'react-router-dom';\nimport { PoolAdminPanel } from './PoolAdminPanel';\nimport { useWallet } from '../../../utils/wallet';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Text\n} = Typography;\nexport default function PoolPage() {\n  _s();\n\n  const {\n    poolAddress\n  } = useParams();\n  const [poolAccountInfo, poolAccountLoaded] = useAccountInfo(isPublicKey(poolAddress) ? new PublicKey(poolAddress) : null);\n  const history = useHistory();\n  const poolInfo = useMemo(() => {\n    if (!poolAccountInfo) {\n      return null;\n    }\n\n    try {\n      return {\n        address: new PublicKey(poolAddress),\n        state: decodePoolState(poolAccountInfo.data),\n        program: poolAccountInfo.owner\n      };\n    } catch (e) {\n      return null;\n    }\n  }, [poolAddress, poolAccountInfo]);\n  const [mintAccountInfo, mintAccountInfoLoaded] = useAccountInfo(poolInfo === null || poolInfo === void 0 ? void 0 : poolInfo.state.poolTokenMint);\n  const mintInfo = useMemo(() => mintAccountInfo ? parseTokenMintData(mintAccountInfo.data) : null, [mintAccountInfo]);\n  const {\n    wallet\n  } = useWallet();\n\n  if (poolInfo && mintInfo && wallet) {\n    var _poolInfo$state$admin;\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n        title: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\"Pool \", poolInfo.address.toBase58()]\n        }, void 0, true),\n        onBack: () => history.push('/pools'),\n        subTitle: poolInfo.state.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          lg: 12,\n          children: /*#__PURE__*/_jsxDEV(PoolInfoPanel, {\n            poolInfo: poolInfo,\n            mintInfo: mintInfo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          lg: 12,\n          children: /*#__PURE__*/_jsxDEV(PoolCreateRedeemPanel, {\n            poolInfo: poolInfo,\n            mintInfo: mintInfo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          children: /*#__PURE__*/_jsxDEV(PoolBalancesPanel, {\n            poolInfo: poolInfo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), wallet.connected && ((_poolInfo$state$admin = poolInfo.state.adminKey) === null || _poolInfo$state$admin === void 0 ? void 0 : _poolInfo$state$admin.equals(wallet.publicKey)) && isAdminControlledPool(poolInfo) ? /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          children: /*#__PURE__*/_jsxDEV(PoolAdminPanel, {\n            poolInfo: poolInfo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      title: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"Pool \", poolAddress]\n      }, void 0, true),\n      onBack: () => history.push('/pools')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FloatingElement, {\n      children: !poolAccountLoaded || !mintAccountInfoLoaded ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Text, {\n        children: \"Invalid pool\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PoolPage, \"p1ikC74k+oOFwTDrQ2dFi+NWSgA=\", false, function () {\n  return [useParams, useAccountInfo, useHistory, useAccountInfo, useWallet];\n});\n\n_c = PoolPage;\n\nfunction isPublicKey(address) {\n  try {\n    new PublicKey(address);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"PoolPage\");","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/serum-dex-ui/src/pages/pools/PoolPage/index.tsx"],"names":["React","useMemo","useParams","Col","PageHeader","Row","Spin","Typography","PublicKey","useAccountInfo","FloatingElement","decodePoolState","isAdminControlledPool","PoolInfoPanel","parseTokenMintData","PoolCreateRedeemPanel","PoolBalancesPanel","useHistory","PoolAdminPanel","useWallet","Text","PoolPage","poolAddress","poolAccountInfo","poolAccountLoaded","isPublicKey","history","poolInfo","address","state","data","program","owner","e","mintAccountInfo","mintAccountInfoLoaded","poolTokenMint","mintInfo","wallet","toBase58","push","name","connected","adminKey","equals","publicKey"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Col, PageHeader, Row, Spin, Typography } from 'antd';\nimport { PublicKey } from '@solana/web3.js';\nimport { useAccountInfo } from '../../../utils/connection';\nimport FloatingElement from '../../../components/layout/FloatingElement';\nimport {\n  decodePoolState,\n  isAdminControlledPool,\n  PoolInfo,\n} from '@project-serum/pool';\nimport PoolInfoPanel from './PoolInfoPanel';\nimport { parseTokenMintData } from '../../../utils/tokens';\nimport PoolCreateRedeemPanel from './PoolCreateRedeemPanel';\nimport PoolBalancesPanel from './PoolBalancesPanel';\nimport { useHistory } from 'react-router-dom';\nimport { PoolAdminPanel } from './PoolAdminPanel';\nimport { useWallet } from '../../../utils/wallet';\n\nconst { Text } = Typography;\n\nexport default function PoolPage() {\n  const { poolAddress } = useParams();\n  const [poolAccountInfo, poolAccountLoaded] = useAccountInfo(\n    isPublicKey(poolAddress) ? new PublicKey(poolAddress) : null,\n  );\n  const history = useHistory();\n\n  const poolInfo: PoolInfo | null = useMemo(() => {\n    if (!poolAccountInfo) {\n      return null;\n    }\n    try {\n      return {\n        address: new PublicKey(poolAddress),\n        state: decodePoolState(poolAccountInfo.data),\n        program: poolAccountInfo.owner,\n      };\n    } catch (e) {\n      return null;\n    }\n  }, [poolAddress, poolAccountInfo]);\n  const [mintAccountInfo, mintAccountInfoLoaded] = useAccountInfo(\n    poolInfo?.state.poolTokenMint,\n  );\n  const mintInfo = useMemo(\n    () => (mintAccountInfo ? parseTokenMintData(mintAccountInfo.data) : null),\n    [mintAccountInfo],\n  );\n  const { wallet } = useWallet();\n\n  if (poolInfo && mintInfo && wallet) {\n    return (\n      <>\n        <PageHeader\n          title={<>Pool {poolInfo.address.toBase58()}</>}\n          onBack={() => history.push('/pools')}\n          subTitle={poolInfo.state.name}\n        />\n        <Row>\n          <Col xs={24} lg={12}>\n            <PoolInfoPanel poolInfo={poolInfo} mintInfo={mintInfo} />\n          </Col>\n          <Col xs={24} lg={12}>\n            <PoolCreateRedeemPanel poolInfo={poolInfo} mintInfo={mintInfo} />\n          </Col>\n          <Col xs={24}>\n            <PoolBalancesPanel poolInfo={poolInfo} />\n          </Col>\n          {wallet.connected &&\n          poolInfo.state.adminKey?.equals(wallet.publicKey) &&\n          isAdminControlledPool(poolInfo) ? (\n            <Col xs={24}>\n              <PoolAdminPanel poolInfo={poolInfo} />\n            </Col>\n          ) : null}\n        </Row>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <PageHeader\n        title={<>Pool {poolAddress}</>}\n        onBack={() => history.push('/pools')}\n      />\n      <FloatingElement>\n        {!poolAccountLoaded || !mintAccountInfoLoaded ? (\n          <Spin />\n        ) : (\n          <Text>Invalid pool</Text>\n        )}\n      </FloatingElement>\n    </>\n  );\n}\n\nfunction isPublicKey(address) {\n  try {\n    new PublicKey(address);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}