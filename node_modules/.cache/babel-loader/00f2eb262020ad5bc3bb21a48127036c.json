{"ast":null,"code":"import _slicedToArray from\"/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from'react';import{Select,Typography}from'antd';import{SearchOutlined}from'@ant-design/icons';import{TOKEN_MINTS}from'@project-serum/serum';import apps from'@project-serum/awesome-serum';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Option=Select.Option;var appsAndTokens=apps.concat(TOKEN_MINTS.map(function(mint){return{name:\"\".concat(mint.name,\" SPL\"),url:\"https://solscan.io/address/\".concat(mint.address.toBase58()),description:\"\".concat(mint.name,\" SPL token\"),icon:'',tags:['token','blockchain','solana','spl','solana',mint.address.toBase58()]};}));export default function AppSearch(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),searchMatches=_useState2[0],setSearchMatches=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),searchValue=_useState4[0],setSearchValue=_useState4[1];var matchApp=function matchApp(searchString,app){var lowerSearchStr=searchString.toLowerCase();return app.name.toLowerCase().includes(lowerSearchStr)||app.tags.some(function(tag){return tag.toLowerCase().includes(lowerSearchStr)||lowerSearchStr.includes(tag.toLowerCase());});};var handleSearch=function handleSearch(value){setSearchValue(value===''?undefined:value);var filteredApps=appsAndTokens.filter(function(app){return matchApp(value,app);});setSearchMatches(filteredApps);};var handleSelect=function handleSelect(value,option){window.open(option.href,'_blank');handleClear();};var handleClear=function handleClear(){setSearchMatches([]);setSearchValue(undefined);};var options=searchMatches.map(function(d){return/*#__PURE__*/_jsxs(Option,{value:d.name,href:d.url,children:[/*#__PURE__*/_jsx(\"h3\",{children:d.name}),/*#__PURE__*/_jsx(Typography.Text,{type:\"secondary\",children:d.url.replace('https://','')})]},d.name);});var ref=useRef();return/*#__PURE__*/_jsx(Select,{ref:ref,showSearch:true,allowClear:true,value:searchValue,placeholder:props.focussed||props.focussed===undefined?'Search for dex, swap, wallet, token...':'',onSearch:handleSearch,onClear:handleClear,onSelect:handleSelect,onFocus:props.onFocus,onBlur:function onBlur(){props.onBlur();handleClear();},notFoundContent:null// todo: make this search history\n,style:{width:props.width||'300px',transition:props.focussed?'width 0.1s ease 0.1s':''},dropdownStyle:{width:props.width||'300px'},dropdownMatchSelectWidth:false,suffixIcon:/*#__PURE__*/_jsx(SearchOutlined,{onClick:function onClick(){return ref.current&&ref.current.focus();}}),filterOption:false,children:options});}","map":{"version":3,"sources":["/Users/cesarhugo.barzano/Desktop/CesarCorp/coins/fork/serum-dex-ui/src/components/AppSearch.tsx"],"names":["React","useRef","useState","Select","Typography","SearchOutlined","TOKEN_MINTS","apps","Option","appsAndTokens","concat","map","mint","name","url","address","toBase58","description","icon","tags","AppSearch","props","searchMatches","setSearchMatches","undefined","searchValue","setSearchValue","matchApp","searchString","app","lowerSearchStr","toLowerCase","includes","some","tag","handleSearch","value","filteredApps","filter","handleSelect","option","window","open","href","handleClear","options","d","replace","ref","focussed","onFocus","onBlur","width","transition","current","focus"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport { Select, Typography } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nimport { TOKEN_MINTS } from '@project-serum/serum';\nimport apps from '@project-serum/awesome-serum';\n\nconst { Option } = Select;\n\nconst appsAndTokens = apps.concat(\n  TOKEN_MINTS.map((mint) => {\n    return {\n      name: `${mint.name} SPL`,\n      url: `https://solscan.io/address/${mint.address.toBase58()}`,\n      description: `${mint.name} SPL token`,\n      icon: '',\n      tags: [\n        'token',\n        'blockchain',\n        'solana',\n        'spl',\n        'solana',\n        mint.address.toBase58(),\n      ],\n    };\n  }),\n);\n\ninterface App {\n  name: string;\n  url: string;\n  description: string;\n  tags: string[];\n}\n\nexport default function AppSearch(props) {\n  const [searchMatches, setSearchMatches] = useState<App[]>([]);\n  const [searchValue, setSearchValue] = useState<string | undefined>(undefined);\n\n  const matchApp = (searchString: string, app: App) => {\n    const lowerSearchStr = searchString.toLowerCase();\n    return (\n      app.name.toLowerCase().includes(lowerSearchStr) ||\n      app.tags.some(\n        (tag) =>\n          tag.toLowerCase().includes(lowerSearchStr) ||\n          lowerSearchStr.includes(tag.toLowerCase()),\n      )\n    );\n  };\n\n  const handleSearch = (value) => {\n    setSearchValue(value === '' ? undefined : value);\n    const filteredApps = appsAndTokens.filter((app) => matchApp(value, app));\n    setSearchMatches(filteredApps);\n  };\n\n  const handleSelect = (value, option) => {\n    window.open(option.href, '_blank');\n    handleClear();\n  };\n\n  const handleClear = () => {\n    setSearchMatches([]);\n    setSearchValue(undefined);\n  };\n\n  const options = searchMatches.map((d) => (\n    <Option key={d.name} value={d.name} href={d.url}>\n      <h3>{d.name}</h3>\n      <Typography.Text type=\"secondary\">\n        {d.url.replace('https://', '')}\n      </Typography.Text>\n    </Option>\n  ));\n\n  const ref = useRef<any>();\n  return (\n    <Select\n      ref={ref}\n      showSearch\n      allowClear\n      value={searchValue}\n      placeholder={\n        props.focussed || props.focussed === undefined\n          ? 'Search for dex, swap, wallet, token...'\n          : ''\n      }\n      onSearch={handleSearch}\n      onClear={handleClear}\n      onSelect={handleSelect}\n      onFocus={props.onFocus}\n      onBlur={() => {\n        props.onBlur();\n        handleClear();\n      }}\n      notFoundContent={null} // todo: make this search history\n      style={{\n        width: props.width || '300px',\n        transition: props.focussed ? 'width 0.1s ease 0.1s' : '',\n      }}\n      dropdownStyle={{\n        width: props.width || '300px',\n      }}\n      dropdownMatchSelectWidth={false}\n      suffixIcon={\n        <SearchOutlined onClick={() => ref.current && ref.current.focus()} />\n      }\n      filterOption={false}\n    >\n      {options}\n    </Select>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}